(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{460:function(e,t,n){},462:function(e,t,n){},463:function(e,t,n){},464:function(e,t,n){},465:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=465},466:function(e,t,n){},542:function(e,t,n){"use strict";n(460)},543:function(e,t,n){"use strict";n(462)},544:function(e,t,n){"use strict";n(463)},546:function(e,t,n){"use strict";n(464)},549:function(e,t,n){"use strict";n.r(t),n.d(t,"getOne",(function(){return r})),n.d(t,"getStyles",(function(){return s}));n(8),n(142),n(413),n(130),n(31),n(230),n(14),n(19);var r=function(e,t){console.log(t),window.fetch("https://wfwf9k3tn7.execute-api.us-west-2.amazonaws.com/production/process/"+(new Date).getTime()+parseInt(1e3*Math.random()),{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({css:{contentType:"css",id:"css",options:{},syntax:e,version:"default",textInput:t}})}).then((function(e){return e.json()})).then((function(e){return e.success?e.payload.css.errors&&e.payload.css.errors.length?{success:!1,error:e.payload.css.errors.map((function(e){return e.message})).join("\n")}:{success:!0,style:e.payload.css.textOutput}:{success:!1,error:e.errors.map((function(e){return e.message})).join("\n")}}),(function(e){return Promise.resolve({success:!1,error:e.message})}))},s=function(e){return e=e.map((function(e){return e.lang?["scss","sass","less","stylus"].includes(e.lang)?r(e.lang,e.content):Promise.resolve({success:!1,error:""}):Promise.resolve({success:!0,style:e.content})})),Promise.all(e)}},551:function(e,t,n){"use strict";n(466)},553:function(e,t,n){"use strict";n.r(t);var r=n(84),s=n(63),i=(n(132),n(88),n(87),n(234),n(128),n(41),n(227),n(8),n(31),n(26),n(410),n(407),n(511),n(512),n(522),n(412),n(523),n(524),n(525),n(526),n(454),n(455),n(527),n(528),n(456),n(529),n(457),n(530),n(531),n(532),n(533),n(534),n(535),n(458),n(536),n(537),n(538),n(539),n(459)),o={tabSize:2,mode:"text/x-vue",styleActiveLine:!0,lineNumbers:!0,styleSelectedText:!0,line:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},hintOptions:{completeSingle:!0},keyMap:"sublime",matchBrackets:!0,showCursorWhenSelecting:!0,extraKeys:{Ctrl:"autocomplete"}},a=(n(130),n(0)),c=n(540),l=n.n(c),u=n(417).debounce,d=n(541),f={components:{VueElementLoading:l.a},props:{jsLabs:{type:Array,default:function(){return[]}},js:{type:[Array,String],default:function(){return[]}},cssLabs:{type:Array,default:function(){return[]}},css:{type:[Array,String],default:function(){return[]}},value:{type:Object,required:!0},themeColor:{type:String,default:"#409eff"}},mounted:function(){var e=this;if(this.hasDocument()){var t=this.$refs.iframe,n=t.contentWindow.document,r=this.cssLabs.map((function(e){return'<link rel="stylesheet" href="'.concat(e,'" />')})),s=this.jsLabs.map((function(e){return'<script src="'.concat(e,'"><\/script>')})),i=Array.isArray(this.js)?this.js:[this.js],o=Array.isArray(this.css)?this.css:[this.css],a="\n<!DOCTYPE html>\n  <html>\n    <head>\n      ".concat(r.join("\n"),"\n      <style>").concat(o.join("\n"),"</style>\n      <script src='https://cdn.jsdelivr.net/npm/vue@2.6.11'><\/script>\n      ").concat(s.join("\n"),"\n      <script>").concat(i.join("\n"),'<\/script>\n      <script>\n        // 错误处理\n        var errorHandler = function(error) {\n          var el = document.getElementById(\'error\')\n          el.innerHTML = \'<pre style="color: red">\' + error.stack +\'</pre>\'\n        }\n        Vue.config.warnHandler = function(msg) { errorHandler(new Error(msg)) }\n        Vue.config.errorHandler = errorHandler\n        Vue.config.productionTip = false\n        Vue.config.devtools = false\n      <\/script>\n    </head>\n    <body id="body">\n      <div><pre id="error" style="color: red"></pre></div>\n      <div id="box"></div>\n    </body>\n</html>');n.open(),n.write(a),n.close(),t.onload=function(){e.setHTML(),e.loading=!1},t.error=function(){e.loading=!1}}},data:function(){return{iframe:null,iframeDocument:null,loading:!0}},watch:{value:function(e){this.setHTML(e)}},methods:{hasWindow:function(){var e=this.$refs.iframe;return!(!e||!e.contentWindow)},hasDocument:function(){var e=this.$refs.iframe;return!!(e&&e.contentWindow&&e.contentWindow.document)},changeHeight:function(){var e=this;this.debounceChangeHeight||(this.debounceChangeHeight=u(300,(function(){if(e.iframe&&e.iframeDocument){var t=e.iframe,n=e.iframeDocument;t.style.display="block";var r=n.documentElement.offsetHeight+10;t.style.height=r+"px",e.$refs.preview&&e.$emit("change-height",e.$refs.preview.clientHeight)}}))),this.debounceChangeHeight()},getScript:function(e,t){return" try {\n          var exports = {};\n          ".concat(e,"\n          var component = exports.default;\n          // 如果定义了 template函数, 则无需 template\n          component.template = component.template || ").concat(t,"\n        } catch (error){\n          errorHandler(error)\n        }\n\n        new Vue(component).$mount('#app')\n      ")},setHTML:function(){var e=this,t=this.value,n=t.styles,r=void 0===n?[]:n,s=t.script,i=void 0===s?"":s,o=t.template,c=t.errors;if(this.hasDocument()&&o){var l=this.$refs.iframe,u=l.contentWindow.document;if(l.contentWindow.Vue&&(l.contentWindow.Vue.options=d(a.a.options,l.contentWindow.Vue.options)),u){var f=u.getElementById("error");f&&(c?(f.style.display="block",f.innerText="".concat(c.join("\n"))):f.style.display="none");var p=u.getElementById("box");if(p){var h=u.createDocumentFragment(),v=u.createElement("style");v.type="text/css",v.innerHTML=r.join("\n");var m=u.createElement("div");m.setAttribute("id","app"),i=this.getScript(i,o);var g=u.createElement("script");g.type="text/javascript",g.innerHTML=i,p.innerHTML="",h.appendChild(v),h.appendChild(m),h.appendChild(g),p.appendChild(h),this.iframe=l,this.iframeDocument=u,this.height||this.$nextTick((function(){e.changeHeight(),l.contentWindow.addEventListener("resize",e.changeHeight,!1)}))}}}}},beforeDestory:function(){this.hasWindow()&&this.iframe.contentWindow.removeEventListener("resize",this.changeHeight)}},p=(n(542),n(16)),h=Object(p.a)(f,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"preview",staticClass:"vue-run-sfc-preview"},[t("vue-element-loading",{attrs:{active:this.loading,spinner:"spinner",color:this.themeColor}}),this._v(" "),t("iframe",{ref:"iframe",staticStyle:{width:"100%",height:"150px",border:"none"},attrs:{sandbox:"allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts",scrolling:"yes",frameborder:"0"}})],1)}),[],!1,null,null,null).exports,v=n(461),m={name:"vue-run-sfc-header",props:{title:String,isExpanded:Boolean,isRow:Boolean,isScreenfull:Boolean},data:function(){return{canScreenfull:v.isEnabled}}},g=(n(543),Object(p.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-run-sfc-header",class:{"vue-run-sfc-header-screenfull":e.isScreenfull}},[n("div",{staticClass:"vue-run-sfc-header-title"},[e._v(e._s(e.title))]),e._v(" "),e.isExpanded?n("div",{staticClass:"vue-run-sfc-header-action"},[n("button",{staticClass:"vue-run-sfc-header-button",on:{click:function(t){return e.$emit("reset")}}},[e._v("\n      重置\n    ")]),e._v(" "),n("button",{staticClass:"vue-run-sfc-header-button",on:{click:function(t){return e.$emit("change-row")}}},[e.isRow?n("span",[e._v("上下")]):n("span",[e._v("左右")]),e._v("布局\n    ")]),e._v(" "),e.canScreenfull?n("button",{staticClass:"vue-run-sfc-header-button",on:{click:function(t){return e.$emit("screenfull")}}},[e.isScreenfull?[e._v("退出全屏")]:[e._v("全屏")]],2):e._e()]):e._e()])}),[],!1,null,null,null).exports),w=n(417).throttle,y={name:"vue-run-sfc-control",props:{isScreenfull:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},hovering:{type:Boolean,default:!1},isRow:{type:Boolean,default:!1}},data:function(){return{style:{}}},computed:{controlText:function(){return this.isExpanded?"关闭编辑器":"在线编辑代码"}},methods:{scrollHandler:function(){var e=this.$parent.$refs.wrapper;if(this.isExpanded&&e){var t=e.getBoundingClientRect(),n=t.top,r=t.bottom,s=t.left,i=t.width,o=r>document.documentElement.clientHeight&&n+44<=document.documentElement.clientHeight;this.style=o?{left:"".concat(s,"px"),width:"".concat(i,"px"),bottom:"0px",position:"fixed",border:"1px solid var(--vue-run-sfc-border, #ebeef5)"}:{}}}},mounted:function(){var e=this;this.$nextTick((function(){e.scrollHandler(),e.throttleScrollHandler=w(100,(function(){e.scrollHandler()})),window.addEventListener("scroll",e.throttleScrollHandler)}))},beforeDestroy:function(){window.removeEventListener("scroll",this.throttleScrollHandler)}},b=(n(544),Object(p.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isScreenfull,expression:"!isScreenfull"}],ref:"control",staticClass:"vue-run-sfc-control",style:e.isExpanded?e.style:null,on:{click:function(t){return e.$emit("expanded")}}},[n("transition",{attrs:{name:"arrow-slide"}},[n("i",{staticClass:"vue-run-sfc-control-icon",class:{hovering:e.hovering||e.isExpanded}})]),e._v(" "),n("transition",{attrs:{name:"text-slide"}},[e.hovering?n("span",{staticClass:"control-text"},[e._v(e._s(e.controlText))]):e._e()]),e._v(" "),n("transition",{attrs:{name:"text-slide"}},[n("span",{staticClass:"power-by-text"},[e._v("Power By\n      "),n("a",{attrs:{href:"https://github.com/dream2023/vue-run-sfc",target:"_blank"}},[e._v("Vue-Run-SFC")])])])],1)}),[],!1,null,null,null).exports),x=n(545),S={name:"vue-run-sfc-main",components:{Multipane:x.a,MultipaneResizer:x.b},props:{isRow:Boolean,isExpanded:Boolean,reverse:Boolean,isScreenfull:Boolean}},C=(n(546),Object(p.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.isRow&&e.isExpanded?"multipane":"div",{tag:"component",staticClass:"vue-run-sfc-main",class:{"default-theme":e.isRow,"vue-run-sfc-main-reverse":e.isExpanded&&!e.isRow&&e.reverse},style:{"padding-top":e.isScreenfull?"57px":null}},[e.isRow&&e.isExpanded?[n("div",{staticClass:"vue-run-sfc-main-pane",staticStyle:{"overflow-y":"auto",width:"50%"}},[e._t("editor")],2),e._v(" "),n("multipane-resizer"),e._v(" "),n("div",{staticClass:"vue-run-sfc-main-pane",staticStyle:{"overflow-y":"auto",flexGrow:"1"}},[e._t("preview")],2)]:[e.isExpanded?e._t("editor"):e._e(),e._v(" "),e._t("preview")]],2)}),[],!1,null,null,null).exports),_=n(550),E=n(417).debounce,H=n(547),j=n(461),R=n(548),k={name:"vue-run-sfc",components:{VueRunSfcHeader:g,VueRunSfcPreview:h,VueRunSfcControl:b,VueRunSfcMain:C,codemirror:i.codemirror},props:{code:String,jsLabs:[String,Array],cssLabs:[String,Array],js:[Array,String],css:[Array,String],value:String,themeColor:String,themeBorderColor:String,row:{type:Boolean,default:void 0},reverse:{type:Boolean,default:void 0},title:String,height:String,open:{type:Boolean,default:void 0},isHideHeader:{type:Boolean,default:void 0}},data:function(){return{hovering:!1,isExpanded:!1,codemirrorOption:o,isScreenfull:!1,editCode:"",initalCode:"",preview:{},previewHeight:0,isRow:null}},computed:{attrs:function(){var e=this,t=this.$_vue_run_sfc||{},n=function(n){var r=t[n]||[];r&&!Array.isArray(r)&&(r=[r]);var i=e.$props[n]||[];return i&&!Array.isArray(i)&&(i=[i]),[].concat(Object(s.a)(r),Object(s.a)(i))},r=Object.keys(this.$props).reduce((function(t,n){return void 0!==e.$props[n]&&(t[n]=e.$props[n]),t}),{});return Object.assign({},t,r,{jsLabs:["https://unpkg.com/element-ui/lib/index.js","https://unpkg.com/babel-polyfill@6.26.0/dist/polyfill.min.js"],cssLabs:n("cssLabs"),js:n("js"),css:n("css")})},editorHeight:function(){if(this.isScreenfull){if(this.isRow){return document.documentElement.clientHeight-58+"px"}return null}if(this.attrs.height)return this.attrs.height;var e=0;if(this.isRow)e=this.previewHeight>150?this.previewHeight:150;else{e=21*this.editCode.split(/\r\n|\r|\n/).length+20,e=e>150?e:150}return e+"px"}},methods:{handleScreenfull:function(){this.isScreenfull=!this.isScreenfull,j.toggle(this.$refs.wrapper)},checkScreenfull:function(){var e=this;j.isEnabled&&j.on("change",(function(){e.isScreenfull=j.isFullscreen}))},handleRun:function(){var e=this;this.runCode||(this.runCode=E(300,Object(r.a)(regeneratorRuntime.mark((function t(){var r,s,i,o,a,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.editCode,e.$emit("input",r),e.$emit("change",r),r){t.next=5;break}return t.abrupt("return");case 5:if(s=H.parseComponent(r),i=s.template,o=s.script,a=s.styles,!(c=s.errors)||!c.length){t.next=10;break}e.preview={errors:c},t.next=26;break;case 10:if(i||o){t.next=12;break}return t.abrupt("return");case 12:if(!window.fetch){t.next=21;break}return l=n(549),t.next=16,l.getStyles(a);case 16:u=t.sent,c=u.filter((function(e){return!e.success})).map((function(e){return e.error})),a=u.filter((function(e){return e.success})).map((function(e){return e.style})),t.next=23;break;case 21:c=a.filter((function(e){return e.lang})).map((function(e){return"暂不支持".concat(e.lang,"预处理器")})),a=a.filter((function(e){return!e.lang})).map((function(e){return e.content}));case 23:i=i?JSON.stringify(i.content):'""',o=o&&o.content.trim()?o.content.trim():"export default {}";try{o=R.transform(o,{presets:["es2015"]}).code,e.preview={styles:a,script:o,template:i,errors:c}}catch(t){e.preview={errors:[t.stack]}}case 26:case"end":return t.stop()}}),t)}))))),this.runCode()},handleReset:function(){this.editCode=this.initalCode,this.handleRun()},setDefaultRow:function(){var e=this;if(void 0!==this.attrs.row)this.isRow=this.attrs.row;else var t=setInterval((function(){if(e.$refs.wrapper){var n=e.$refs.wrapper.clientWidth;e.isRow=n>992,clearInterval(t)}}),500)},handlePreviewHeightChange:function(e){this.previewHeight=e},init:function(){this.setDefaultRow(),this.isExpanded=this.attrs.open,Object(_.a)({variables:{"--vue-run-sfc-main":this.attrs.themeColor||"#409eff","--vue-run-sfc-border":this.attrs.themeBorderColor||"#eaeefb"}});var e=this.code||this.value;e=e?decodeURIComponent(e):"",this.initalCode=e,this.editCode=e}},mounted:function(){this.checkScreenfull(),this.init(),this.handleRun()}},$=(n(551),Object(p.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrapper",staticClass:"vue-run-sfc",style:{"overflow-y":e.isScreenfull?"auto":null},on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},[e.attrs.isHideHeader?e._e():n("vue-run-sfc-header",{attrs:{title:e.title,"is-row":e.isRow,"is-screenfull":e.isScreenfull,"is-expanded":e.isExpanded},on:{reset:e.handleReset,"change-row":function(t){e.isRow=!e.isRow},screenfull:e.handleScreenfull}}),e._v(" "),n("vue-run-sfc-main",{attrs:{"is-row":e.isRow,"is-expanded":e.isExpanded,reverse:e.attrs.reverse,"is-screenfull":e.isScreenfull},scopedSlots:e._u([{key:"editor",fn:function(){return[n("codemirror",{staticClass:"vue-run-sfc-editor",style:{height:e.editorHeight},attrs:{options:e.codemirrorOption},on:{input:e.handleRun},model:{value:e.editCode,callback:function(t){e.editCode=t},expression:"editCode"}})]},proxy:!0},{key:"preview",fn:function(){return[n("vue-run-sfc-preview",{ref:"preview",style:{borderTop:e.isRow||e.attrs.reverse||!e.isExpanded?"":"1px solid var(--vue-run-sfc-border, #ebeef5)"},attrs:{"js-labs":e.attrs.jsLabs,"theme-color":e.attrs.themeColor,css:e.attrs.css,js:e.attrs.js,"css-labs":e.attrs.cssLabs,value:e.preview},on:{"change-height":e.handlePreviewHeightChange}})]},proxy:!0}])}),e._v(" "),n("vue-run-sfc-control",{attrs:{"is-screenfull":e.isScreenfull,"is-expanded":e.isExpanded,hovering:e.hovering,"is-row":e.isRow},on:{expanded:function(t){e.isExpanded=!e.isExpanded}}})],1)}),[],!1,null,null,null));t.default=$.exports}}]);