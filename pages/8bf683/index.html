<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>利用长期缓存 | LiYang&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <link rel="preload" href="/assets/css/0.styles.ff3929f5.css" as="style"><link rel="preload" href="/assets/js/app.40794b05.js" as="script"><link rel="preload" href="/assets/js/2.21c2c3d2.js" as="script"><link rel="preload" href="/assets/js/245.7117eda6.js" as="script"><link rel="prefetch" href="/assets/js/10.058f7072.js"><link rel="prefetch" href="/assets/js/100.f3568421.js"><link rel="prefetch" href="/assets/js/101.3669cd11.js"><link rel="prefetch" href="/assets/js/102.cefa1450.js"><link rel="prefetch" href="/assets/js/103.0fc12baa.js"><link rel="prefetch" href="/assets/js/104.fc75b27c.js"><link rel="prefetch" href="/assets/js/105.9efa40da.js"><link rel="prefetch" href="/assets/js/106.2132845c.js"><link rel="prefetch" href="/assets/js/107.50efbf3f.js"><link rel="prefetch" href="/assets/js/108.2e4d6b56.js"><link rel="prefetch" href="/assets/js/109.362f4964.js"><link rel="prefetch" href="/assets/js/11.acbb83b6.js"><link rel="prefetch" href="/assets/js/110.260ecf9d.js"><link rel="prefetch" href="/assets/js/111.ac0ed6b0.js"><link rel="prefetch" href="/assets/js/112.e26ce83f.js"><link rel="prefetch" href="/assets/js/113.c17594f4.js"><link rel="prefetch" href="/assets/js/114.081ea0e8.js"><link rel="prefetch" href="/assets/js/115.9f1c1fc5.js"><link rel="prefetch" href="/assets/js/116.300e5c32.js"><link rel="prefetch" href="/assets/js/117.005796a9.js"><link rel="prefetch" href="/assets/js/118.5dd34410.js"><link rel="prefetch" href="/assets/js/119.2a52edee.js"><link rel="prefetch" href="/assets/js/12.f5d0a92b.js"><link rel="prefetch" href="/assets/js/120.2692504f.js"><link rel="prefetch" href="/assets/js/121.de91fbab.js"><link rel="prefetch" href="/assets/js/122.8fe54cb7.js"><link rel="prefetch" href="/assets/js/123.27f7de3d.js"><link rel="prefetch" href="/assets/js/124.df486141.js"><link rel="prefetch" href="/assets/js/125.b3333a19.js"><link rel="prefetch" href="/assets/js/126.0252235d.js"><link rel="prefetch" href="/assets/js/127.e416e0cb.js"><link rel="prefetch" href="/assets/js/128.80fc9ce8.js"><link rel="prefetch" href="/assets/js/129.d549459c.js"><link rel="prefetch" href="/assets/js/13.c75b92e4.js"><link rel="prefetch" href="/assets/js/130.535fd734.js"><link rel="prefetch" href="/assets/js/131.9d165e98.js"><link rel="prefetch" href="/assets/js/132.ef795834.js"><link rel="prefetch" href="/assets/js/133.2044b8d2.js"><link rel="prefetch" href="/assets/js/134.ea0aee7d.js"><link rel="prefetch" href="/assets/js/135.6f39d3e5.js"><link rel="prefetch" href="/assets/js/136.47dc0812.js"><link rel="prefetch" href="/assets/js/137.3eaf9788.js"><link rel="prefetch" href="/assets/js/138.1135d0ed.js"><link rel="prefetch" href="/assets/js/139.d546d7cb.js"><link rel="prefetch" href="/assets/js/14.1114043e.js"><link rel="prefetch" href="/assets/js/140.aae58cac.js"><link rel="prefetch" href="/assets/js/141.b8b72927.js"><link rel="prefetch" href="/assets/js/142.b161cba1.js"><link rel="prefetch" href="/assets/js/143.cfb7b204.js"><link rel="prefetch" href="/assets/js/144.818c2cff.js"><link rel="prefetch" href="/assets/js/145.60f90c39.js"><link rel="prefetch" href="/assets/js/146.7ddef663.js"><link rel="prefetch" href="/assets/js/147.06d1017e.js"><link rel="prefetch" href="/assets/js/148.c7c411a0.js"><link rel="prefetch" href="/assets/js/149.334bd804.js"><link rel="prefetch" href="/assets/js/15.3f0b462f.js"><link rel="prefetch" href="/assets/js/150.7c8c73b7.js"><link rel="prefetch" href="/assets/js/151.62d10d6c.js"><link rel="prefetch" href="/assets/js/152.82e28168.js"><link rel="prefetch" href="/assets/js/153.e1ee4321.js"><link rel="prefetch" href="/assets/js/154.f576cc10.js"><link rel="prefetch" href="/assets/js/155.964a90f2.js"><link rel="prefetch" href="/assets/js/156.4bdc75f5.js"><link rel="prefetch" href="/assets/js/157.6581cb30.js"><link rel="prefetch" href="/assets/js/158.24f9817a.js"><link rel="prefetch" href="/assets/js/159.89915418.js"><link rel="prefetch" href="/assets/js/16.d8001a48.js"><link rel="prefetch" href="/assets/js/160.643f5b36.js"><link rel="prefetch" href="/assets/js/161.4714f73e.js"><link rel="prefetch" href="/assets/js/162.7527446c.js"><link rel="prefetch" href="/assets/js/163.229f891d.js"><link rel="prefetch" href="/assets/js/164.429d3070.js"><link rel="prefetch" href="/assets/js/165.5e342261.js"><link rel="prefetch" href="/assets/js/166.f0cb088a.js"><link rel="prefetch" href="/assets/js/167.40a0038b.js"><link rel="prefetch" href="/assets/js/168.758c8238.js"><link rel="prefetch" href="/assets/js/169.a972a570.js"><link rel="prefetch" href="/assets/js/17.8a850ded.js"><link rel="prefetch" href="/assets/js/170.0fba2db3.js"><link rel="prefetch" href="/assets/js/171.43f66f94.js"><link rel="prefetch" href="/assets/js/172.9467deb8.js"><link rel="prefetch" href="/assets/js/173.26fef872.js"><link rel="prefetch" href="/assets/js/174.0958a150.js"><link rel="prefetch" href="/assets/js/175.a87b0ab5.js"><link rel="prefetch" href="/assets/js/176.04363b06.js"><link rel="prefetch" href="/assets/js/177.34672e1c.js"><link rel="prefetch" href="/assets/js/178.42e0456b.js"><link rel="prefetch" href="/assets/js/179.ec648519.js"><link rel="prefetch" href="/assets/js/18.fe4d545b.js"><link rel="prefetch" href="/assets/js/180.8a5fc825.js"><link rel="prefetch" href="/assets/js/181.3dabf704.js"><link rel="prefetch" href="/assets/js/182.e1193960.js"><link rel="prefetch" href="/assets/js/183.975cb0ee.js"><link rel="prefetch" href="/assets/js/184.a0e65b8e.js"><link rel="prefetch" href="/assets/js/185.1b24284f.js"><link rel="prefetch" href="/assets/js/186.9f5186d0.js"><link rel="prefetch" href="/assets/js/187.7b2b6fb4.js"><link rel="prefetch" href="/assets/js/188.39449f6c.js"><link rel="prefetch" href="/assets/js/189.d6c034d8.js"><link rel="prefetch" href="/assets/js/19.48cc10f6.js"><link rel="prefetch" href="/assets/js/190.2fe5508a.js"><link rel="prefetch" href="/assets/js/191.368805e9.js"><link rel="prefetch" href="/assets/js/192.8351a6ec.js"><link rel="prefetch" href="/assets/js/193.4d86bf98.js"><link rel="prefetch" href="/assets/js/194.86d3a829.js"><link rel="prefetch" href="/assets/js/195.931ce7ef.js"><link rel="prefetch" href="/assets/js/196.35818a22.js"><link rel="prefetch" href="/assets/js/197.109eef6d.js"><link rel="prefetch" href="/assets/js/198.a092c6d3.js"><link rel="prefetch" href="/assets/js/199.0a7aea6b.js"><link rel="prefetch" href="/assets/js/20.1baf39d0.js"><link rel="prefetch" href="/assets/js/200.eb75a43c.js"><link rel="prefetch" href="/assets/js/201.167f1a27.js"><link rel="prefetch" href="/assets/js/202.80380232.js"><link rel="prefetch" href="/assets/js/203.dfb07860.js"><link rel="prefetch" href="/assets/js/204.0de5d7ad.js"><link rel="prefetch" href="/assets/js/205.da83ee83.js"><link rel="prefetch" href="/assets/js/206.4ff75723.js"><link rel="prefetch" href="/assets/js/207.c0023a8f.js"><link rel="prefetch" href="/assets/js/208.e1d257d1.js"><link rel="prefetch" href="/assets/js/209.668018f6.js"><link rel="prefetch" href="/assets/js/21.b0e0d339.js"><link rel="prefetch" href="/assets/js/210.eac594b9.js"><link rel="prefetch" href="/assets/js/211.1cc3154f.js"><link rel="prefetch" href="/assets/js/212.0a3e0704.js"><link rel="prefetch" href="/assets/js/213.e5257a7e.js"><link rel="prefetch" href="/assets/js/214.a335e108.js"><link rel="prefetch" href="/assets/js/215.0422f8a3.js"><link rel="prefetch" href="/assets/js/216.6e63fc29.js"><link rel="prefetch" href="/assets/js/217.a38e1ca8.js"><link rel="prefetch" href="/assets/js/218.04c38c96.js"><link rel="prefetch" href="/assets/js/219.89a7899f.js"><link rel="prefetch" href="/assets/js/22.f5c6b71f.js"><link rel="prefetch" href="/assets/js/220.02a01cb8.js"><link rel="prefetch" href="/assets/js/221.e0eded2d.js"><link rel="prefetch" href="/assets/js/222.06c16e31.js"><link rel="prefetch" href="/assets/js/223.a4b75ccb.js"><link rel="prefetch" href="/assets/js/224.9129f3cf.js"><link rel="prefetch" href="/assets/js/225.1c089563.js"><link rel="prefetch" href="/assets/js/226.8d7ae032.js"><link rel="prefetch" href="/assets/js/227.3bfa4328.js"><link rel="prefetch" href="/assets/js/228.a1748bdf.js"><link rel="prefetch" href="/assets/js/229.c1c27996.js"><link rel="prefetch" href="/assets/js/23.265953eb.js"><link rel="prefetch" href="/assets/js/230.f39a1f48.js"><link rel="prefetch" href="/assets/js/231.ca132071.js"><link rel="prefetch" href="/assets/js/232.9ca5e931.js"><link rel="prefetch" href="/assets/js/233.e04e254f.js"><link rel="prefetch" href="/assets/js/234.22381aab.js"><link rel="prefetch" href="/assets/js/235.6bc8508d.js"><link rel="prefetch" href="/assets/js/236.5914c9a6.js"><link rel="prefetch" href="/assets/js/237.a721ad82.js"><link rel="prefetch" href="/assets/js/238.af3e025d.js"><link rel="prefetch" href="/assets/js/239.44fe29c9.js"><link rel="prefetch" href="/assets/js/24.16fb3de9.js"><link rel="prefetch" href="/assets/js/240.9ba57538.js"><link rel="prefetch" href="/assets/js/241.46a9cb7e.js"><link rel="prefetch" href="/assets/js/242.ae70539b.js"><link rel="prefetch" href="/assets/js/243.8a1feaf8.js"><link rel="prefetch" href="/assets/js/244.cdbaaca6.js"><link rel="prefetch" href="/assets/js/246.742dd686.js"><link rel="prefetch" href="/assets/js/247.7046d3e0.js"><link rel="prefetch" href="/assets/js/248.dbd8407d.js"><link rel="prefetch" href="/assets/js/249.206b660b.js"><link rel="prefetch" href="/assets/js/25.21d0c0dd.js"><link rel="prefetch" href="/assets/js/250.f559b400.js"><link rel="prefetch" href="/assets/js/251.f13bd91c.js"><link rel="prefetch" href="/assets/js/252.aaa10b65.js"><link rel="prefetch" href="/assets/js/253.78640ae7.js"><link rel="prefetch" href="/assets/js/254.5251f555.js"><link rel="prefetch" href="/assets/js/255.5f8655e1.js"><link rel="prefetch" href="/assets/js/256.0b1da59b.js"><link rel="prefetch" href="/assets/js/257.c4b311d3.js"><link rel="prefetch" href="/assets/js/258.62c44f28.js"><link rel="prefetch" href="/assets/js/259.7a8ecb77.js"><link rel="prefetch" href="/assets/js/26.68bfb3cd.js"><link rel="prefetch" href="/assets/js/260.9506bc77.js"><link rel="prefetch" href="/assets/js/261.ab6ac9b0.js"><link rel="prefetch" href="/assets/js/262.6f237036.js"><link rel="prefetch" href="/assets/js/27.e08c2734.js"><link rel="prefetch" href="/assets/js/28.d05f086f.js"><link rel="prefetch" href="/assets/js/29.14bacba0.js"><link rel="prefetch" href="/assets/js/3.9859aeed.js"><link rel="prefetch" href="/assets/js/30.d1c1c795.js"><link rel="prefetch" href="/assets/js/31.c464fa16.js"><link rel="prefetch" href="/assets/js/32.74ae82b3.js"><link rel="prefetch" href="/assets/js/33.6d39a197.js"><link rel="prefetch" href="/assets/js/34.a5448e75.js"><link rel="prefetch" href="/assets/js/35.e677db99.js"><link rel="prefetch" href="/assets/js/36.9373382d.js"><link rel="prefetch" href="/assets/js/37.aaef6158.js"><link rel="prefetch" href="/assets/js/38.b8534a41.js"><link rel="prefetch" href="/assets/js/39.8e5ecefa.js"><link rel="prefetch" href="/assets/js/4.b3a2afa1.js"><link rel="prefetch" href="/assets/js/40.0fbf1e24.js"><link rel="prefetch" href="/assets/js/41.b68829b1.js"><link rel="prefetch" href="/assets/js/42.c6327e05.js"><link rel="prefetch" href="/assets/js/43.5cdcb8f5.js"><link rel="prefetch" href="/assets/js/44.48fd0994.js"><link rel="prefetch" href="/assets/js/45.45e8d731.js"><link rel="prefetch" href="/assets/js/46.ea182d63.js"><link rel="prefetch" href="/assets/js/47.3d1bf5d3.js"><link rel="prefetch" href="/assets/js/48.485f3e01.js"><link rel="prefetch" href="/assets/js/49.a2622af2.js"><link rel="prefetch" href="/assets/js/5.ddbdceff.js"><link rel="prefetch" href="/assets/js/50.572052eb.js"><link rel="prefetch" href="/assets/js/51.ed257c0f.js"><link rel="prefetch" href="/assets/js/52.23b18f3a.js"><link rel="prefetch" href="/assets/js/53.14b56cb4.js"><link rel="prefetch" href="/assets/js/54.bb07175e.js"><link rel="prefetch" href="/assets/js/55.d48bde66.js"><link rel="prefetch" href="/assets/js/56.38433979.js"><link rel="prefetch" href="/assets/js/57.99b13154.js"><link rel="prefetch" href="/assets/js/58.498c71ad.js"><link rel="prefetch" href="/assets/js/59.24e06284.js"><link rel="prefetch" href="/assets/js/6.cae33779.js"><link rel="prefetch" href="/assets/js/60.fe0260d5.js"><link rel="prefetch" href="/assets/js/61.b5bcfd89.js"><link rel="prefetch" href="/assets/js/62.bdc41a00.js"><link rel="prefetch" href="/assets/js/63.10468463.js"><link rel="prefetch" href="/assets/js/64.028e0281.js"><link rel="prefetch" href="/assets/js/65.f762d4ff.js"><link rel="prefetch" href="/assets/js/66.33239ba5.js"><link rel="prefetch" href="/assets/js/67.c89232f4.js"><link rel="prefetch" href="/assets/js/68.e2ab181e.js"><link rel="prefetch" href="/assets/js/69.86594af5.js"><link rel="prefetch" href="/assets/js/7.5bd7e1fe.js"><link rel="prefetch" href="/assets/js/70.f79bf73b.js"><link rel="prefetch" href="/assets/js/71.36d10bfe.js"><link rel="prefetch" href="/assets/js/72.85d3c063.js"><link rel="prefetch" href="/assets/js/73.4746e647.js"><link rel="prefetch" href="/assets/js/74.c8d81312.js"><link rel="prefetch" href="/assets/js/75.dd1ae94f.js"><link rel="prefetch" href="/assets/js/76.b06cc20c.js"><link rel="prefetch" href="/assets/js/77.855f7650.js"><link rel="prefetch" href="/assets/js/78.4e5b0253.js"><link rel="prefetch" href="/assets/js/79.95567ab3.js"><link rel="prefetch" href="/assets/js/8.62836d81.js"><link rel="prefetch" href="/assets/js/80.7b7033a0.js"><link rel="prefetch" href="/assets/js/81.45b93100.js"><link rel="prefetch" href="/assets/js/82.36d8eb8a.js"><link rel="prefetch" href="/assets/js/83.b361b85d.js"><link rel="prefetch" href="/assets/js/84.2e4874fa.js"><link rel="prefetch" href="/assets/js/85.272cfc57.js"><link rel="prefetch" href="/assets/js/86.aaa56439.js"><link rel="prefetch" href="/assets/js/87.dc9e3259.js"><link rel="prefetch" href="/assets/js/88.689b6a8b.js"><link rel="prefetch" href="/assets/js/89.f22e017d.js"><link rel="prefetch" href="/assets/js/9.584f1ef6.js"><link rel="prefetch" href="/assets/js/90.d0ed3f12.js"><link rel="prefetch" href="/assets/js/91.21868b2f.js"><link rel="prefetch" href="/assets/js/92.0b1bc56b.js"><link rel="prefetch" href="/assets/js/93.9fd7ccef.js"><link rel="prefetch" href="/assets/js/94.5cee5367.js"><link rel="prefetch" href="/assets/js/95.c81773d8.js"><link rel="prefetch" href="/assets/js/96.c8f61d95.js"><link rel="prefetch" href="/assets/js/97.f86ea530.js"><link rel="prefetch" href="/assets/js/98.09c0fa30.js"><link rel="prefetch" href="/assets/js/99.c4bd6444.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff3929f5.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.svg" alt="LiYang's blog" class="logo"> <span class="site-name can-hide">LiYang's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/pages/0a6679/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a6679/" class="nav-link">编程基础</a></li><li class="dropdown-item"><!----> <a href="/pages/714859/" class="nav-link">开发软件</a></li><li class="dropdown-item"><!----> <a href="/pages/690ae0/" class="nav-link">类库框架</a></li><li class="dropdown-item"><!----> <a href="/pages/d2dd63/" class="nav-link">知识进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/fd695e/" class="nav-link">工程开发</a></li><li class="dropdown-item"><!----> <a href="/pages/f37132/" class="nav-link">编程思想</a></li><li class="dropdown-item"><!----> <a href="/pages/73d90e/" class="nav-link">领域分支</a></li><li class="dropdown-item"><!----> <a href="/pages/b7eb61/" class="nav-link">社区发展</a></li><li class="dropdown-item"><!----> <a href="/pages/83b440/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0d54d7/" class="nav-link">后端知识</a></li><li class="dropdown-item"><!----> <a href="/pages/416bc0/" class="nav-link">软技能</a></li></ul></div></div><div class="nav-item"><a href="/leetCode/" class="nav-link">🤡LeetCode</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记本" class="dropdown-title"><a href="/notes/" class="link-title">笔记本</a> <span class="title" style="display:none;">笔记本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>书籍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/es6/" class="nav-link">《ES6教程》</a></li><li class="dropdown-subitem"><a href="/books/professionalJs/" class="nav-link">《JavaScript高级程序设计》</a></li></ul></li><li class="dropdown-item"><h4>教程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/course/css3-jspang/" class="nav-link">CSS3(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/es6-jspang/" class="nav-link">ES6(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/performance/" class="nav-link">性能(Google Developers)</a></li></ul></li><li class="dropdown-item"><h4>技术文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8bf683/.html" class="nav-link">leaflet中文教程</a></li></ul></li></ul></div></div> <a href="https://github.com/fineliving" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Evan Xu</h3> <span>前端界的小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/pages/0a6679/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a6679/" class="nav-link">编程基础</a></li><li class="dropdown-item"><!----> <a href="/pages/714859/" class="nav-link">开发软件</a></li><li class="dropdown-item"><!----> <a href="/pages/690ae0/" class="nav-link">类库框架</a></li><li class="dropdown-item"><!----> <a href="/pages/d2dd63/" class="nav-link">知识进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/fd695e/" class="nav-link">工程开发</a></li><li class="dropdown-item"><!----> <a href="/pages/f37132/" class="nav-link">编程思想</a></li><li class="dropdown-item"><!----> <a href="/pages/73d90e/" class="nav-link">领域分支</a></li><li class="dropdown-item"><!----> <a href="/pages/b7eb61/" class="nav-link">社区发展</a></li><li class="dropdown-item"><!----> <a href="/pages/83b440/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0d54d7/" class="nav-link">后端知识</a></li><li class="dropdown-item"><!----> <a href="/pages/416bc0/" class="nav-link">软技能</a></li></ul></div></div><div class="nav-item"><a href="/leetCode/" class="nav-link">🤡LeetCode</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记本" class="dropdown-title"><a href="/notes/" class="link-title">笔记本</a> <span class="title" style="display:none;">笔记本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>书籍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/es6/" class="nav-link">《ES6教程》</a></li><li class="dropdown-subitem"><a href="/books/professionalJs/" class="nav-link">《JavaScript高级程序设计》</a></li></ul></li><li class="dropdown-item"><h4>教程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/course/css3-jspang/" class="nav-link">CSS3(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/es6-jspang/" class="nav-link">ES6(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/performance/" class="nav-link">性能(Google Developers)</a></li></ul></li><li class="dropdown-item"><h4>技术文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8bf683/.html" class="nav-link">leaflet中文教程</a></li></ul></li></ul></div></div> <a href="https://github.com/fineliving" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/932a6d/" class="sidebar-link">性能为何至关重要</a></li><li><a href="/pages/5c6fa0/" class="sidebar-link">使用 RAIL 模型评估性能</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>加载性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/3da005/" class="sidebar-link">总览</a></li><li><a href="/pages/5af7d4/" class="sidebar-link">如何测量速度？</a></li><li><a href="/pages/7c5d18/" class="sidebar-link">文字内容</a></li><li><a href="/pages/79cdb9/" class="sidebar-link">图形内容</a></li><li><a href="/pages/f4a116/" class="sidebar-link">HTTP请求</a></li><li><a href="/pages/998cd7/" class="sidebar-link">HTTP缓存</a></li><li><a href="/pages/cb3ca9/" class="sidebar-link">总结和演示</a></li><li><a href="/pages/ed916f/" class="sidebar-link">速度工具</a></li><li><a href="/pages/200943/" class="sidebar-link">通过导航和资源定时评估加载性能</a></li><li><a href="/pages/13c2e2/" class="sidebar-link">以用户为中心的性能指标</a></li><li><a href="/pages/30d447/" class="sidebar-link">了解低带宽和高延迟</a></li><li><a href="/pages/029c6a/" class="sidebar-link">优化内容效率</a></li><li><a href="/pages/1c8f87/" class="sidebar-link">避免不必要的下载</a></li><li><a href="/pages/9c6617/" class="sidebar-link">优化基于文本的资产的编码和传送大小</a></li><li><a href="/pages/000317/" class="sidebar-link">JavaScript启动优化</a></li><li><a href="/pages/d9771b/" class="sidebar-link">加载第三方JavaScript</a></li><li><a href="/pages/16e316/" class="sidebar-link">网页字体优化</a></li><li><a href="/pages/0497ba/" class="sidebar-link">通过客户提示适应用户</a></li><li><a href="/pages/d34d56/" class="sidebar-link">通过保存数据交付快速轻便的应用程序</a></li><li><a href="/pages/b5f9f1/" class="sidebar-link">通过摇树来减少JavaScript负载</a></li><li><a href="/pages/a0ed26/" class="sidebar-link">离线指南</a></li><li><a href="/pages/690a1a/" class="sidebar-link">网页存储概览</a></li><li><a href="/pages/b84219/" class="sidebar-link">使用IndexedDB的最佳实践</a></li><li><a href="/pages/65f486/" class="sidebar-link">Offline UX 注意事项</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>精心安排加载</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/371041/" class="sidebar-link">关键渲染路径</a></li><li><a href="/pages/f31118/" class="sidebar-link">构建对象模型</a></li><li><a href="/pages/739b11/" class="sidebar-link">渲染树构建、布局及绘制</a></li><li><a href="/pages/b9d842/" class="sidebar-link">阻塞渲染的CSS</a></li><li><a href="/pages/f005c3/" class="sidebar-link">使用JavaScript添加交互</a></li><li><a href="/pages/1d7873/" class="sidebar-link">评估关键渲染路径</a></li><li><a href="/pages/3b99f9/" class="sidebar-link">分析关键渲染路径性能</a></li><li><a href="/pages/0c6644/" class="sidebar-link">优化关键渲染路径</a></li><li><a href="/pages/baf7eb/" class="sidebar-link">PageSpeed规则和建议</a></li><li><a href="/pages/4f4df7/" class="sidebar-link">HTTP/2简介</a></li><li><a href="/pages/65a803/" class="sidebar-link">使用PRPL模式应用即时加载</a></li><li><a href="/pages/08c756/" class="sidebar-link">资源优先级–让浏览器助您一臂之力</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>利用webpack优化web性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c18ffb/" class="sidebar-link">介绍</a></li><li><a href="/pages/ec3b6e/" class="sidebar-link">减小前端大小</a></li><li><a href="/pages/8bf683/" aria-current="page" class="active sidebar-link">利用长期缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8bf683/#使用捆绑软件版本控制和缓存头" class="sidebar-link">使用捆绑软件版本控制和缓存头</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8bf683/#进一步阅读" class="sidebar-link">进一步阅读</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#将依赖项和运行时提取到单独的文件中" class="sidebar-link">将依赖项和运行时提取到单独的文件中</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8bf683/#依存关系" class="sidebar-link">依存关系</a></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#webpack-运行时代码" class="sidebar-link">Webpack 运行时代码</a></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#进一步阅读-2" class="sidebar-link">进一步阅读</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#内联-webpack-运行时以保存额外的-http-请求" class="sidebar-link">内联 webpack 运行时以保存额外的 HTTP 请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8bf683/#如果使用-htmlwebpackplugin-生成-html" class="sidebar-link">如果使用 HtmlWebpackPlugin 生成 HTML</a></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#如果使用自定义服务器逻辑生成-html" class="sidebar-link">如果使用自定义服务器逻辑生成 HTML</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#现在不需要的延迟加载代码" class="sidebar-link">现在不需要的延迟加载代码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8bf683/#进一步阅读-3" class="sidebar-link">进一步阅读</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#将代码分为路线和页面" class="sidebar-link">将代码分为路线和页面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8bf683/#对于单页应用" class="sidebar-link">对于单页应用</a></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#对于传统的多页应用程序" class="sidebar-link">对于传统的多页应用程序</a></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#进一步阅读-4" class="sidebar-link">进一步阅读</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#使模块-id-更稳定" class="sidebar-link">使模块 ID 更稳定</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8bf683/#进一步阅读-5" class="sidebar-link">进一步阅读</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/8bf683/#加起来" class="sidebar-link">加起来</a></li></ul></li><li><a href="/pages/0e8875/" class="sidebar-link">monitor-and-analyze</a></li><li><a href="/pages/7cfdc0/" class="sidebar-link">结论</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>渲染性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7f377b/" class="sidebar-link">渲染性能</a></li><li><a href="/pages/ccf0ef/" class="sidebar-link">优化JavaScript执行</a></li><li><a href="/pages/bdf4e6/" class="sidebar-link">缩小样式计算的范围并降低其复杂性</a></li><li><a href="/pages/270241/" class="sidebar-link">简化绘制的复杂度、减小绘制区域</a></li><li><a href="/pages/ad1d46/" class="sidebar-link">坚持仅合成器的属性和管理层计数</a></li><li><a href="/pages/de7324/" class="sidebar-link">使输入处理程序去除抖动</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>审核网站</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/29e252/" class="sidebar-link">审核</a></li><li><a href="/pages/ec49df/" class="sidebar-link">准备工作</a></li><li><a href="/pages/c4f089/" class="sidebar-link">检查网站安全</a></li><li><a href="/pages/b7e0b0/" class="sidebar-link">测量性能工具</a></li><li><a href="/pages/bac92b/" class="sidebar-link">分享结果</a></li><li><a href="/pages/e05301/" class="sidebar-link">下一步</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/course/performance" title="《性能(Google Developers)》-目录页" data-v-1cd794fe>《性能(Google Developers)》</a></li> <li data-v-1cd794fe><a href="/course/performance/#利用webpack优化web性能" title="《性能(Google Developers)》#利用webpack优化web性能" data-v-1cd794fe>利用webpack优化web性能</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/fineliving" target="_blank" title="作者" class="beLink" data-v-1cd794fe>Li Yang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2020-11-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          利用长期缓存
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="利用长期缓存"><a href="#利用长期缓存" class="header-anchor">#</a> 利用长期缓存</h1> <p>改善应用程序加载时间的下一件事（<a href="https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size" target="_blank" rel="noopener noreferrer">优化应用程序大小之后<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）是缓存。使用它可以将部分应用程序保留在客户端上，并避免每次都重新下载它们。</p> <h2 id="使用捆绑软件版本控制和缓存头"><a href="#使用捆绑软件版本控制和缓存头" class="header-anchor">#</a> 使用捆绑软件版本控制和缓存头</h2> <p>进行缓存的常见方法是：</p> <ol><li><p>告诉浏览器将文件缓存很长时间（例如一年）：</p> <div class="language- extra-class"><pre class="language-text"><code>＃服务器头缓存- 控制：最大值- 年龄= 31536000
</code></pre></div><p>注意：如果您不熟悉<code>Cache-Control</code>的功能，请参阅 Jake Archibald</p> <p>关于缓存最佳实践</p> <p>的出色文章。</p></li> <li><p>并在更改文件后重命名该文件以强制重新下载：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;！-更改之前-&gt;
&lt;script src = “ 。/ index-v15 。js ” &gt; &lt;/ script&gt;

&lt;！-更改后-&gt;
&lt;script src = “ 。/ index-v16 。js ” &gt; &lt;/ script&gt;
</code></pre></div></li></ol> <p>这种方法告诉浏览器下载 JS 文件，对其进行缓存并使用缓存的副本。仅当文件名更改（或一年过去）时，浏览器才可以访问网络。</p> <p>使用 webpack，您可以执行相同的操作，但是可以指定文件哈希值，而不是版本号。要将哈希值包含到文件名中，请使用 <a href="https://webpack.js.org/configuration/output/#output-filename" target="_blank" rel="noopener noreferrer"><code>[chunkhash\]</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js
模块。出口= {
  压缩：“ ./ index 。js ”，
  输出：{
    档名：'bundle。[chunkhash] .js' ，
        //→bundle.8e0d62a03.js
  }，
};
</code></pre></div><p>**注意：**即使捆绑包保持不变，Webpack 也会生成不同的哈希值-例如，即使您重命名文件或在其他操作系统下编译捆绑包。这是一个错误，目前尚无明确的解决方案。<a href="https://github.com/webpack/webpack/issues/1479" target="_blank" rel="noopener noreferrer">查看 GitHub 上的讨论<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>如果需要文件名将其发送到客户端，请使用<code>HtmlWebpackPlugin</code>或 <code>WebpackManifestPlugin</code>。</p> <p>这<a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noopener noreferrer"><code>HtmlWebpackPlugin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一种简单但不太灵活的方法。在编译期间，此插件会生成一个 HTML 文件，其中包含所有已编译的资源。如果您的服务器逻辑并不复杂，那么对您来说应该足够了：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- index.html --&gt;
&lt;!doctype html&gt;
&lt;!-- ... --&gt;
&lt;script src=&quot;bundle.8e0d62a03.js&quot;&gt;&lt;/script&gt;
</code></pre></div><p>这 <a href="https://github.com/danethurber/webpack-manifest-plugin" target="_blank" rel="noopener noreferrer"><code>WebpackManifestPlugin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一种更灵活的方法，如果您拥有复杂的服务器部件，则很有用。在构建期间，它将生成一个 JSON 文件，该文件具有无哈希文件名和具有哈希值的文件名之间的映射。在服务器上使用此 JSON 找出要使用的文件：</p> <div class="language- extra-class"><pre class="language-text"><code>// manifest.json
{
  &quot;bundle.js&quot;: &quot;bundle.8e0d62a03.js&quot;
}
</code></pre></div><h3 id="进一步阅读"><a href="#进一步阅读" class="header-anchor">#</a> 进一步阅读</h3> <ul><li>杰克·阿奇博尔德（Jake Archibald）<a href="https://jakearchibald.com/2016/caching-best-practices/" target="_blank" rel="noopener noreferrer">关于缓存最佳做法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="将依赖项和运行时提取到单独的文件中"><a href="#将依赖项和运行时提取到单独的文件中" class="header-anchor">#</a> 将依赖项和运行时提取到单独的文件中</h2> <h3 id="依存关系"><a href="#依存关系" class="header-anchor">#</a> 依存关系</h3> <p>应用程序依存关系的更改频率往往少于实际应用程序代码。如果将它们移动到单独的文件中，则浏览器将能够分别缓存它们-并且不会在应用程序代码每次更改时重新下载它们。</p> <p>**关键术语：**在 webpack 术语中，带有应用程序代码的单独文件称为 <em>chunks</em>。我们稍后将使用该名称。</p> <p>要将依赖项提取到单独的块中，请执行三个步骤：</p> <ol><li><p>将输出文件名替换为</p> <div class="language- extra-class"><pre class="language-text"><code>[name].[chunkname].js
</code></pre></div><p>：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js
模块。出口= {
  输出：{
    //之前
    filename ：'bundle。[chunkhash] .js' ，
    //之后
    filename ：'[name]。[chunkhash] .js' ，
  }，
};
</code></pre></div><p>当 webpack 生成应用程序时，它将替换</p> <p><code>[name]</code></p> <p>为一个块的名称。如果我们不添加</p> <div class="language- extra-class"><pre class="language-text"><code>[name]
</code></pre></div><p>零件，则必须通过散列对其进行区分，这非常困难！</p></li> <li><p>将</p> <div class="language- extra-class"><pre class="language-text"><code>entry
</code></pre></div><p>字段转换为对象：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js
模块。出口= {
  //之前
  压缩：“ ./ index 。js ”，
  //之后
  压缩：{
    main ：'./index.js' ，
  }，
};
</code></pre></div><p>在此代码段中，“ main”是块的名称。该名称将代替<code>[name]</code>步骤 1 中的名称。</p> <p>到目前为止，如果您构建应用程序，则该块将包含整个应用程序代码–就像我们尚未完成这些步骤一样。但这将在几秒钟内改变。</p></li> <li><p>**在 webpack 4 中，**将该<code>optimization.splitChunks.chunks: 'all'</code>选项添加到您的 webpack 配置中：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js（适用于webpack 4）
模块。出口= {
  优化：{
    splitChunks ：{
      块：“全部”，
    }
  }，
};
</code></pre></div><p>此选项启用智能代码拆分。有了它，如果 webpack 大于 30 kB（在压缩和 gzip 压缩之前），它将提取供应商代码。它还将提取通用代码-如果您的构建产生多个捆绑包（例如<a href="https://developers.google.cn/web/fundamentals/performance/webpack/use-long-term-caching#split-the-code-into-routes-and-pages" target="_blank" rel="noopener noreferrer">，将您的应用拆分为路由<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>），这将非常有用 。</p> <p>**在 webpack 3 中，**添加<a href="https://webpack.js.org/plugins/commons-chunk-plugin/" target="_blank" rel="noopener noreferrer"><code>CommonsChunkPlugin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js（适用于webpack 3）
模块。出口= {
  插件：[
    新的webpack 。优化。CommonsChunkPlugin （{
      //包含依赖项的块的名称。
      //用此名称代替步骤1中的[name]
      名称：'vendor' ，

      //一个函数，该函数确定要包含在此块中的模块
      minChunks ：模块=&gt; 模块。上下文&amp;&amp;
        模块。情境。包括（'node_modules' ），
    }），
  ]，
};
</code></pre></div><p>该插件获取路径包含的所有模块，<code>node_modules</code>并将其移至名为的单独文件中<code>vendor.[chunkhash].js</code>。</p></li></ol> <p>完成这些更改后，每个构建将生成两个文件，而不是一个：<code>main.[chunkhash].js</code>和 <code>vendor.[chunkhash].js</code>（<code>vendors~main.[chunkhash].js</code>对于 webpack 4）。对于 webpack 4，如果依赖性较小，则可能不会生成供应商捆绑包-很好：</p> <div class="language- extra-class"><pre class="language-text"><code>$ webpack
哈希：ac01483e8fec1fa70676
版本：webpack 3.8 。1个
时间：3816ms
                           资产规模块名称
  ./ main 。00bab6fd3100008a42b0.js 82 kB 0 [ 发出] 主
./ 供应商。d9e134771799ecdf9483 。js 47 kB 1 [发射]供应商
</code></pre></div><p>浏览器将分别缓存这些文件-并仅重新下载更改的代码。</p> <h3 id="webpack-运行时代码"><a href="#webpack-运行时代码" class="header-anchor">#</a> Webpack 运行时代码</h3> <p>不幸的是，仅提取供应商代码是不够的。如果您尝试更改应用程序代码中的某些内容：</p> <div class="language- extra-class"><pre class="language-text"><code>// index.js
…
…

// E.g. add this:
console.log('Wat');
</code></pre></div><p>您会注意到<code>vendor</code>哈希值也发生了变化：</p> <div class="language- extra-class"><pre class="language-text"><code>                           资产规模块名称
./ 供应商。d9e134771799ecdf9483 。js 47 kB 1 [发射]供应商
</code></pre></div><p>↓</p> <div class="language- extra-class"><pre class="language-text"><code>                            资产规模块名称
./ 供应商。e6ea4504d61a1cc1c60b 。js 47 kB 1 [发射]供应商
</code></pre></div><p>发生这种情况的原因是，除了模块代码之外，Webpack 捆绑包还<a href="https://webpack.js.org/concepts/manifest/" target="_blank" rel="noopener noreferrer"><em>具有运行时</em><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> -一小段代码，用于管理模块的执行。当您将代码拆分为多个文件时，这段代码开始包括块 ID 与相应文件之间的映射：</p> <div class="language- extra-class"><pre class="language-text"><code>// vendor.e6ea4504d61a1cc1c60b.js
script.src = __webpack_require__.p + chunkId + &quot;.&quot; + {
  &quot;0&quot;: &quot;2f2269c7f0a55a5c1871&quot;
}[chunkId] + &quot;.js&quot;;
</code></pre></div><p>Webpack 将此运行时包含在最后一个生成的块中，<code>vendor</code> 在我们的例子中。每次任何块更改时，这段代码也会更改，从而导致整个<code>vendor</code>块都更改。</p> <p>为了解决这个问题，让我们将运行时移到一个单独的文件中。**在 webpack 4 中，**这可以通过启用以下<code>optimization.runtimeChunk</code>选项来实现：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js (for webpack 4)
module.exports = {
  optimization: {
    runtimeChunk: true,
  },
};
</code></pre></div><p>**在 webpack 3 中，**通过使用创建一个额外的空块来做到这一点<code>CommonsChunkPlugin</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js (for webpack 3)
module.exports = {
  plugins: [
    new webpack.optimize.CommonsChunkPlugin({
      name: 'vendor',

      minChunks: module =&gt; module.context &amp;&amp;
        module.context.includes('node_modules'),
    }),

    // This plugin must come after the vendor one (because webpack
    // includes runtime into the last chunk)
    new webpack.optimize.CommonsChunkPlugin({
      name: 'runtime',

      // minChunks: Infinity means that no app modules
      // will be included into this chunk
      minChunks: Infinity,
    }),
  ],
};
</code></pre></div><p>完成这些更改后，每个构建将生成三个文件：</p> <div class="language- extra-class"><pre class="language-text"><code>$ webpack
哈希：ac01483e8fec1fa70676
版本：webpack 3.8 。1个
时间：3816ms
                            资产规模块名称
   ./ main 。00bab6fd3100008a42b0.js 82 kB 0 [ 发出] 主
 ./ 供应商。26886caf15818fa82dfa 。js 46 kB 1 [发射]供应商
./ 运行时。79f17c27b335abc7aaf4.js 1.45 kB 3 [发射]运行时
</code></pre></div><p><code>index.html</code>以相反的顺序将它们包括进来–完成了：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- index.html --&gt;
&lt;script src=&quot;./runtime.79f17c27b335abc7aaf4.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;./vendor.26886caf15818fa82dfa.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;./main.00bab6fd3100008a42b0.js&quot;&gt;&lt;/script&gt;
</code></pre></div><h3 id="进一步阅读-2"><a href="#进一步阅读-2" class="header-anchor">#</a> 进一步阅读</h3> <ul><li>Webpack <a href="https://webpack.js.org/guides/caching/" target="_blank" rel="noopener noreferrer">长期缓存<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>指南</li> <li>Webpack <a href="https://webpack.js.org/concepts/manifest/" target="_blank" rel="noopener noreferrer">有关 Webpack 运行时和清单的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>文档</li> <li><a href="https://medium.com/webpack/webpack-bits-getting-the-most-out-of-the-commonschunkplugin-ab389e5f318" target="_blank" rel="noopener noreferrer">“充分利用 CommonsChunkPlugin”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://gist.github.com/sokra/1522d586b8e5c0f5072d7565c2bee693" target="_blank" rel="noopener noreferrer">如何<code>optimization.splitChunks</code>与<code>optimization.runtimeChunk</code>工作<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="内联-webpack-运行时以保存额外的-http-请求"><a href="#内联-webpack-运行时以保存额外的-http-请求" class="header-anchor">#</a> 内联 webpack 运行时以保存额外的 HTTP 请求</h2> <p>为了使事情变得更好，请尝试将 webpack 运行时内联到 HTML 响应中。即，代替此：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- index.html --&gt;
&lt;script src=&quot;./runtime.79f17c27b335abc7aaf4.js&quot;&gt;&lt;/script&gt;
</code></pre></div><p>做这个：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- index.html --&gt;
&lt;script&gt;
!function(e){function n(r){if(t[r])return t[r].exports;…}} ([]);
&lt;/script&gt;
</code></pre></div><p>运行时很小，并且内联它可以帮助您保存 HTTP 请求（对于 HTTP / 1 非常重要；对于 HTTP / 2 不太重要，但可能仍会起作用）。</p> <p>这是操作方法。</p> <h3 id="如果使用-htmlwebpackplugin-生成-html"><a href="#如果使用-htmlwebpackplugin-生成-html" class="header-anchor">#</a> 如果使用 HtmlWebpackPlugin 生成 HTML</h3> <p>如果使用 <a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noopener noreferrer">HtmlWebpackPlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>生成 HTML 文件， <a href="https://github.com/DustinJackson/html-webpack-inline-source-plugin" target="_blank" rel="noopener noreferrer">则只<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 需要<a href="https://github.com/DustinJackson/html-webpack-inline-source-plugin" target="_blank" rel="noopener noreferrer">InlineSourcePlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js
const HtmlWebpackPlugin = require('html-webpack-plugin');
const InlineSourcePlugin = require('html-webpack-inline-source-plugin');

module.exports = {
  plugins: [
    new HtmlWebpackPlugin({
      // Inline all files which names start with “runtime~” and end with “.js”.
      // That’s the default naming of runtime chunks
      inlineSource: 'runtime~.+\\.js',
    }),
    // This plugin enables the “inlineSource” option
    new InlineSourcePlugin(),
  ],
};
</code></pre></div><h3 id="如果使用自定义服务器逻辑生成-html"><a href="#如果使用自定义服务器逻辑生成-html" class="header-anchor">#</a> 如果使用自定义服务器逻辑生成 HTML</h3> <p><strong>使用 webpack 4：</strong></p> <ol><li><p>添加</p> <p><code>WebpackManifestPlugin</code></p> <p>即可知道运行时块的生成名称：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js（适用于webpack 4）
const ManifestPlugin = require （'webpack-manifest-plugin' ）;

模块。出口= {
  插件：[
    新的ManifestPlugin （），
  ]，
};
</code></pre></div><p>使用此插件进行构建将创建一个如下所示的文件：</p> <div class="language- extra-class"><pre class="language-text"><code>// manifest.json
{
  “ 运行时〜主。JS “：” 运行时〜主。8e0d62a03.js ”
}
</code></pre></div></li> <li><p>以方便的方式内联运行时块的内容。例如，使用 Node.js 和 Express：</p> <div class="language- extra-class"><pre class="language-text"><code>// server.js
const fs = require （'fs' ）;
const manifest = require （'./manifest.json' ）;

const runtimeContent = fs 。readFileSync （manifest [ 'runtime〜main.js' ]，'utf-8' ）;

应用程式。get （'/' ，（req ，res ）=&gt; {
  水库。发送（`
    …
    &lt;script&gt; $ {runtimeContent} &lt;/ script&gt;
    …
  ` ）;
}）;
</code></pre></div></li></ol> <p><strong>或使用 webpack 3：</strong></p> <ol><li><p>通过指定</p> <div class="language- extra-class"><pre class="language-text"><code>filename
</code></pre></div><p>以下内容使运行时名称为静态：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js（适用于webpack 3）
模块。出口= {
  插件：[
    新的webpack 。优化。CommonsChunkPlugin （{
      名称：“运行时”，
      minChunks ：Infinity ，
      文件名：“ runtime 。js ”，
        //→现在将调用运行时文件
        //“ runtime.js”，而不是“ runtime.79f17c27b335abc7aaf4.js”
    }），
  ]，
};
</code></pre></div></li> <li></li></ol> <div class="language- extra-class"><pre class="language-text"><code>runtime.js
</code></pre></div><p>以方便的方式 内联内容。例如，使用 Node.js 和 Express：</p> <div class="language- extra-class"><pre class="language-text"><code>// server.js
const fs = require （“ fs” ）；
const runtimeContent = fs 。readFileSync （'./ runtime.js' ，'utf-8' ）;

应用程式。得到（'/' ，（req ，res ）=&gt; {
  水库。发送（`
    …
    &lt;script&gt; $ {runtimeContent} &lt;/ script&gt;
    …
  ` ）;
}）；
</code></pre></div><h2 id="现在不需要的延迟加载代码"><a href="#现在不需要的延迟加载代码" class="header-anchor">#</a> 现在不需要的延迟加载代码</h2> <p>有时，页面包含或多或少的重要部分：</p> <ul><li>如果您在 YouTube 上加载视频页面，则您更关心视频而不是评论。在这里，视频比评论更重要。</li> <li>如果您在新闻网站上打开文章，则您更关心文章的文字而不是广告。在这里，文字比广告更重要。</li></ul> <p>在这种情况下，请先仅下载最重要的内容，然后再延迟加载其余部分，以提高初始加载性能。使用<a href="https://webpack.js.org/api/module-methods/#import-" target="_blank" rel="noopener noreferrer">的 <code>import()</code>功能<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和 <a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener noreferrer">代码分割<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>为这样的：</p> <div class="language- extra-class"><pre class="language-text"><code>// videoPlayer.js
export function renderVideoPlayer() { … }

// comments.js
export function renderComments() { … }

// index.js
import {renderVideoPlayer} from './videoPlayer';
renderVideoPlayer();

// …Custom event listener
onShowCommentsClick(() =&gt; {
  import('./comments').then((comments) =&gt; {
    comments.renderComments();
  });
});
</code></pre></div><p><code>import()</code>指定要动态加载特定模块。当 webpack 看到时<code>import('./module.js')</code>，它将把该模块移动到单独的块中：</p> <div class="language- extra-class"><pre class="language-text"><code>$ webpack
哈希：39b2a53cb4e73f0dc5b2
版本：webpack 3.8 。1个
时间：4273ms
                            资产规模块名称
      ./ 0.8ecaf182f5c85b7a8199.js 22.5 kB 0 [已发射]
   ./ main 。f7e53d8e13e9a2745d6d 。js 60 kB 1 [ 发出] 主要
 ./ 供应商。4f14b6326a80f4752a98.js 46 kB 2 [ 发出]供应商
./ 运行时。79f17c27b335abc7aaf4.js 1.45 kB 3 [发射]运行时
</code></pre></div><p>并仅在执行到达<code>import()</code>功能时下载。</p> <p>这将使<code>main</code>捆束更小，从而缩短了初始装载时间。更重要的是，它将改善缓存–如果您更改主块中的代码，则注释块不会受到影响。</p> <p>**注意：**如果您使用 Babel 编译此代码，则会出现语法错误，因为 Babel 无法立即使用<code>import()</code>。为避免该错误，请添加 <a href="https://www.npmjs.com/package/babel-plugin-syntax-dynamic-import" target="_blank" rel="noopener noreferrer"><code>syntax-dynamic-import</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 插件。</p> <h3 id="进一步阅读-3"><a href="#进一步阅读-3" class="header-anchor">#</a> 进一步阅读</h3> <ul><li><a href="https://webpack.js.org/api/module-methods/#import-" target="_blank" rel="noopener noreferrer">该<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="https://webpack.js.org/api/module-methods/#import-" target="_blank" rel="noopener noreferrer"> 功能的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Webpack 文档<a href="https://webpack.js.org/api/module-methods/#import-" target="_blank" rel="noopener noreferrer"><code>import()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/tc39/proposal-dynamic-import" target="_blank" rel="noopener noreferrer">用于实现<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="https://github.com/tc39/proposal-dynamic-import" target="_blank" rel="noopener noreferrer"> 语法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的 JavaScript 建议<a href="https://github.com/tc39/proposal-dynamic-import" target="_blank" rel="noopener noreferrer"><code>import()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="将代码分为路线和页面"><a href="#将代码分为路线和页面" class="header-anchor">#</a> 将代码分为路线和页面</h2> <p>如果您的应用程序具有多个路由或页面，但是只有一个带有代码的 JS 文件（单个代码<code>main</code>块），则很可能在每个请求中提供了额外的字节。例如，当用户访问您网站的主页时：</p> <p><img src="https://developers.google.cn/web/fundamentals/performance/webpack/site-home-page.png" alt="WebFundamentals主页"></p> <p>他们不需要加载用于渲染位于不同页面上的文章的代码，但是他们会加载它。此外，如果用户始终只访问主页，而您在文章代码上进行了更改，则 webpack 将使整个捆绑软件无效-用户将不得不重新下载整个应用程序。</p> <p>如果我们将应用分为页面（或路由，如果是单页应用），则用户将仅下载相关代码。另外，浏览器将更好地缓存应用程序代码：如果更改主页代码，则 webpack 将仅使相应的块无效。</p> <h3 id="对于单页应用"><a href="#对于单页应用" class="header-anchor">#</a> 对于单页应用</h3> <p>要按路线划分单页应用，请使用<code>import()</code>（请参阅<a href="https://developers.google.cn/web/fundamentals/performance/webpack/use-long-term-caching#lazy-loading" target="_blank" rel="noopener noreferrer">“您现在不需要的延迟加载代码”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>部分）。如果您使用框架，则它可能已有解决方案：</p> <ul><li><a href="https://reacttraining.com/react-router/web/guides/code-splitting" target="_blank" rel="noopener noreferrer">“代码分裂”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中<code>react-router</code>的文件（包括反应）</li> <li><a href="https://router.vuejs.org/en/advanced/lazy-loading.html" target="_blank" rel="noopener noreferrer">“延迟加载路线”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中 <code>vue-router</code>的文档（对于 Vue.js）</li></ul> <h3 id="对于传统的多页应用程序"><a href="#对于传统的多页应用程序" class="header-anchor">#</a> 对于传统的多页应用程序</h3> <p>要按页面拆分传统应用，请使用 webpack 的<a href="https://webpack.js.org/concepts/entry-points/" target="_blank" rel="noopener noreferrer">入口点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。如果您的应用程序具有三种页面：主页，文章页面和用户帐户页面，则它应具有三个条目：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js
module.exports = {
  entry: {
    home: './src/Home/index.js',
    article: './src/Article/index.js',
    profile: './src/Profile/index.js'
  },
};
</code></pre></div><p>对于每个条目文件，webpack 将构建一个单独的依赖关系树并生成一个包，其中仅包含该条目使用的模块：</p> <div class="language- extra-class"><pre class="language-text"><code>$ webpack
哈希：318d7b8490a7382bf23b
版本：webpack 3.8 。1个
时间：4273ms
                            资产规模大块大块的名称
      ./ 0.8ecaf182f5c85b7a8199.js 22.5 kB        0 [ 发出]
   ./ home 。91b9ed27366fe7e33d6a 。js     18 kB        1 [ 发出]   主页
./ 文章。87a128755b16ac3294fd 。js     32 kB        2 [ 发出]   文章
./ profile 。de945dc02685f6166781 。js     24 kB        3 [ 发出]   配置文件
 ./ 供应商。4f14b6326a80f4752a98.js 46 kB        4 [ 发出]   供应商
./ 运行时。318d7b8490a7382bf23b 。js   1.45 kB        5 [ 发出]   运行时
</code></pre></div><p>因此，如果仅文章页面使用 Lodash，则<code>home</code>和<code>profile</code>捆绑包中将不包含它-并且用户在访问主页时不必下载此库。</p> <p>但是，独立的依赖关系树有其缺点。如果两个入口点都使用 Lodash，并且您尚未将依赖项移至供应商捆绑包中，则两个入口点都将包含 Lodash 副本。为了解决这个问题，**在 webpack 4 中，**将该<code>optimization.splitChunks.chunks: 'all'</code>选项添加 到您的 webpack 配置中：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js（适用于webpack 4）
模块。出口= {
  优化：{
    splitChunks ：{
      块：'全部' ，
    }
  }，
};
</code></pre></div><p>此选项启用智能代码拆分。使用此选项，webpack 会自动查找通用代码并将其提取到单独的文件中。</p> <p>或者，**在 webpack 3 中，**使用<a href="https://webpack.js.org/plugins/commons-chunk-plugin/" target="_blank" rel="noopener noreferrer"><code>CommonsChunkPlugin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> –将公共依赖项移动到新的指定文件中：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js (for webpack 3)
module.exports = {
  plugins: [
    new webpack.optimize.CommonsChunkPlugin({
      // A name of the chunk that will include the common dependencies
      name: 'common',

      // The plugin will move a module into a common file
      // only if it’s included into `minChunks` chunks
      // (Note that the plugin analyzes all chunks, not only entries)
      minChunks: 2,    // 2 is the default value
    }),
  ],
};
</code></pre></div><p>随意发挥<code>minChunks</code>价值，找到最好的之一。通常，您希望保持较小，但如果块数量增加，则增加。例如，对于 3 个块，<code>minChunks</code>可能为 2，但对于 30 个块，可能为 8 –因为如果将其保持为 2，则太多模块将进入通用文件，从而使其膨胀过多。</p> <h3 id="进一步阅读-4"><a href="#进一步阅读-4" class="header-anchor">#</a> 进一步阅读</h3> <ul><li>Webpack <a href="https://webpack.js.org/concepts/entry-points/" target="_blank" rel="noopener noreferrer">关于入口点概念的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>文档</li> <li>Webpack <a href="https://webpack.js.org/plugins/commons-chunk-plugin/" target="_blank" rel="noopener noreferrer">关于<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> CommonsChunkPlugin 的文档</li> <li><a href="https://medium.com/webpack/webpack-bits-getting-the-most-out-of-the-commonschunkplugin-ab389e5f318" target="_blank" rel="noopener noreferrer">“充分利用 CommonsChunkPlugin”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://gist.github.com/sokra/1522d586b8e5c0f5072d7565c2bee693" target="_blank" rel="noopener noreferrer">如何<code>optimization.splitChunks</code>与<code>optimization.runtimeChunk</code>工作<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="使模块-id-更稳定"><a href="#使模块-id-更稳定" class="header-anchor">#</a> 使模块 ID 更稳定</h2> <p>构建代码时，webpack 为每个模块分配一个 ID。以后，这些 ID <code>require()</code>在包内的中使用。您通常会在模块路径之前的生成输出中看到 ID：</p> <div class="language- extra-class"><pre class="language-text"><code>$ webpack
哈希：df3474e4f76528e3bbc9
版本：webpack 3.8 。1个
时间：2150ms
                           资产规模块名称
      ./ 0.8ecaf182f5c85b7a8199.js 22.5 kB 0 [已发射]
   ./ main 。4e50a16675574df6a9e9 。js 60 kB 1 [ 发出] 主要
 ./ 供应商。26886caf15818fa82dfa 。js 46 kB 2 [发射]供应商
./ 运行时。79f17c27b335abc7aaf4.js 1.45 kB 3 [发射]运行时
</code></pre></div><p>​ ↓ 这里</p> <div class="language- extra-class"><pre class="language-text"><code>   [ 0 ] ./ 索引。js 29 kB { 1 } [内置]
   [ 2 ]（webpack ）/ buildin / 全局。js 488 字节{ 2 } [内置]
   [ 3 ]（webpack ）/ buildin / 模块。js 495 字节{ 2 } [内置]
   [ 4 ] ./ 评论。js 58 kB { 0 } [内置]
   [ 5 ] ./ ads 。js 74 kB { 1 } [内置]
    + 1 个隐藏模块
</code></pre></div><p>默认情况下，使用计数器来计算 ID（即第一个模块的 ID 为 0，第二个模块的 ID 为 1，依此类推）。问题在于，当您添加新模块时，它可能会出现在模块列表的中间，从而更改所有下一个模块的 ID：</p> <div class="language- extra-class"><pre class="language-text"><code>$ webpack
哈希：df3474e4f76528e3bbc9
版本：webpack 3.8 。1个
时间：2150ms
                           资产规模大块大块的名称
      ./ 0.5c82c0f337fcb22672b5.js 22 kB        0 [ 发出]
   ./ main 。0c8b617dfc40c2827ae3.js 82 kB        1 [ 发出]   主
 ./ 供应商。26886caf15818fa82dfa 。js     46 kB        2 [ 发出]   供应商
./ 运行时。79f17c27b335abc7aaf4.js 1.45 kB        3 [ 发出]   运行时
   [ 0 ] ./ 索引。js 29 kB { 1 } [ 内置]
   [ 2 ] （webpack ）/ buildin / global 。js 488 字节{ 2 } [ 内置]
   [ 3 ] （webpack ）/ buildin / 模块。js 495 字节{ 2 } [ 内置]
</code></pre></div><p>​ ↓ 我们添加了一个新模块...</p> <div class="language- extra-class"><pre class="language-text"><code>   [ 4 ] ./ webPlayer 。js 24 kB { 1 } [ 内置]
</code></pre></div><p>​ ↓ 看看它做了什么！<code>comments.js</code>现在具有 ID 5 而不是 4</p> <div class="language- extra-class"><pre class="language-text"><code>   [ 5 ] ./ 评论。js 58 kB { 0 } [内置]
</code></pre></div><p>​ ↓ <code>ads.js</code>现在具有 ID 6，而不是 5</p> <div class="language- extra-class"><pre class="language-text"><code>   [ 6 ] ./ ads 。js 74 kB { 1 } [内置]
       + 1 个隐藏模块
</code></pre></div><p>这会使所有包含或依赖于具有更改 ID 的模块的块无效-即使它们的实际代码没有更改。在我们的例子中，<code>0</code>大块（带有的块<code>comments.js</code>）和<code>main</code>大块（带有其他应用程序代码的块）无效-而只有那个<code>main</code>应该是无效的。</p> <p>要解决此问题，请更改使用来计算模块 ID 的方式 <a href="https://webpack.js.org/plugins/hashed-module-ids-plugin/" target="_blank" rel="noopener noreferrer"><code>HashedModuleIdsPlugin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。它将基于计数器的 ID 替换为模块路径的哈希值：</p> <div class="language- extra-class"><pre class="language-text"><code>$ webpack
哈希：df3474e4f76528e3bbc9
版本：webpack 3.8 。1个
时间：2150ms
                           资产规模大块大块的名称
      ./ 0.6168aaac8461862eab7a 。js   22.5 kB        0 [ 发出]
   ./ main 。a2e49a279552980e3b91 。js     60 kB        1 [ 发出]   主
 ./ 供应商。ff9f7ea865884e6a84c8 。js     46 kB        2 [ 发出]   供应商
./ 运行时。25f5d0204e4f77fa57a1.js 1.45 kB        3 [ 发出]   运行时
</code></pre></div><p>↓ 这里</p> <div class="language- extra-class"><pre class="language-text"><code>[ 3IRH ] ./ index 。js 29 kB { 1 } [内置]
[ DuR2 ]（webpack ）/ buildin / 全局。js 488 字节{ 2 } [内置]
[ JkW7 ]（webpack ）/ buildin / 模块。js 495 字节{ 2 } [内置]
[ LbCc ] ./ webPlayer 。js 24 kB { 1 } [内置]
[ lebJ ] ./ 评论。js 58 kB { 0 } [内置]
[ 02Tr ] ./ ads 。js 74 kB { 1 } [内置]
    + 1 个隐藏模块
</code></pre></div><p>使用这种方法，仅当您重命名或移动该模块时，模块的 ID 才会更改。新模块不会影响其他模块的 ID。</p> <p>要启用该插件，请将其添加到<code>plugins</code>配置部分：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js
module.exports = {
  plugins: [
    new webpack.HashedModuleIdsPlugin(),
  ],
};
</code></pre></div><h3 id="进一步阅读-5"><a href="#进一步阅读-5" class="header-anchor">#</a> 进一步阅读</h3> <ul><li>Webpack <a href="https://webpack.js.org/plugins/hashed-module-ids-plugin/" target="_blank" rel="noopener noreferrer">关于<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> HashedModuleIdsPlugin 的文档</li></ul> <h2 id="加起来"><a href="#加起来" class="header-anchor">#</a> 加起来</h2> <ul><li>缓存包并通过更改包名称来区分版本</li> <li>将捆绑包分为应用程序代码，供应商代码和运行时</li> <li>内联运行时以保存 HTTP 请求</li> <li>延迟加载非关键代码 <code>import</code></li> <li>按路线/页面划分代码，以避免加载不必要的内容</li></ul></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/ec3b6e/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">减小前端大小</div></a> <a href="/pages/0e8875/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">monitor-and-analyze</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/ec3b6e/" class="prev">减小前端大小</a></span> <span class="next"><a href="/pages/0e8875/">monitor-and-analyze</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/1c4e14/"><div>你想知道的css hack知识全都帮你整理好了</div></a> <span>06-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/d8a080/"><div>问题和经验</div></a> <span>06-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/a93118/"><div>CSS Hack</div></a> <span>06-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xugaoyi" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2021
    <span>Evan Xu | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.40794b05.js" defer></script><script src="/assets/js/2.21c2c3d2.js" defer></script><script src="/assets/js/245.7117eda6.js" defer></script>
  </body>
</html>