<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>优化基于文本的资产的编码和传送大小 | LiYang&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <link rel="preload" href="/assets/css/0.styles.ff3929f5.css" as="style"><link rel="preload" href="/assets/js/app.40794b05.js" as="script"><link rel="preload" href="/assets/js/2.21c2c3d2.js" as="script"><link rel="preload" href="/assets/js/220.02a01cb8.js" as="script"><link rel="prefetch" href="/assets/js/10.058f7072.js"><link rel="prefetch" href="/assets/js/100.f3568421.js"><link rel="prefetch" href="/assets/js/101.3669cd11.js"><link rel="prefetch" href="/assets/js/102.cefa1450.js"><link rel="prefetch" href="/assets/js/103.0fc12baa.js"><link rel="prefetch" href="/assets/js/104.fc75b27c.js"><link rel="prefetch" href="/assets/js/105.9efa40da.js"><link rel="prefetch" href="/assets/js/106.2132845c.js"><link rel="prefetch" href="/assets/js/107.50efbf3f.js"><link rel="prefetch" href="/assets/js/108.2e4d6b56.js"><link rel="prefetch" href="/assets/js/109.362f4964.js"><link rel="prefetch" href="/assets/js/11.acbb83b6.js"><link rel="prefetch" href="/assets/js/110.260ecf9d.js"><link rel="prefetch" href="/assets/js/111.ac0ed6b0.js"><link rel="prefetch" href="/assets/js/112.e26ce83f.js"><link rel="prefetch" href="/assets/js/113.c17594f4.js"><link rel="prefetch" href="/assets/js/114.081ea0e8.js"><link rel="prefetch" href="/assets/js/115.9f1c1fc5.js"><link rel="prefetch" href="/assets/js/116.300e5c32.js"><link rel="prefetch" href="/assets/js/117.005796a9.js"><link rel="prefetch" href="/assets/js/118.5dd34410.js"><link rel="prefetch" href="/assets/js/119.2a52edee.js"><link rel="prefetch" href="/assets/js/12.f5d0a92b.js"><link rel="prefetch" href="/assets/js/120.2692504f.js"><link rel="prefetch" href="/assets/js/121.de91fbab.js"><link rel="prefetch" href="/assets/js/122.8fe54cb7.js"><link rel="prefetch" href="/assets/js/123.27f7de3d.js"><link rel="prefetch" href="/assets/js/124.df486141.js"><link rel="prefetch" href="/assets/js/125.b3333a19.js"><link rel="prefetch" href="/assets/js/126.0252235d.js"><link rel="prefetch" href="/assets/js/127.e416e0cb.js"><link rel="prefetch" href="/assets/js/128.80fc9ce8.js"><link rel="prefetch" href="/assets/js/129.d549459c.js"><link rel="prefetch" href="/assets/js/13.c75b92e4.js"><link rel="prefetch" href="/assets/js/130.535fd734.js"><link rel="prefetch" href="/assets/js/131.9d165e98.js"><link rel="prefetch" href="/assets/js/132.ef795834.js"><link rel="prefetch" href="/assets/js/133.2044b8d2.js"><link rel="prefetch" href="/assets/js/134.ea0aee7d.js"><link rel="prefetch" href="/assets/js/135.6f39d3e5.js"><link rel="prefetch" href="/assets/js/136.47dc0812.js"><link rel="prefetch" href="/assets/js/137.3eaf9788.js"><link rel="prefetch" href="/assets/js/138.1135d0ed.js"><link rel="prefetch" href="/assets/js/139.d546d7cb.js"><link rel="prefetch" href="/assets/js/14.1114043e.js"><link rel="prefetch" href="/assets/js/140.aae58cac.js"><link rel="prefetch" href="/assets/js/141.b8b72927.js"><link rel="prefetch" href="/assets/js/142.b161cba1.js"><link rel="prefetch" href="/assets/js/143.cfb7b204.js"><link rel="prefetch" href="/assets/js/144.818c2cff.js"><link rel="prefetch" href="/assets/js/145.60f90c39.js"><link rel="prefetch" href="/assets/js/146.7ddef663.js"><link rel="prefetch" href="/assets/js/147.06d1017e.js"><link rel="prefetch" href="/assets/js/148.c7c411a0.js"><link rel="prefetch" href="/assets/js/149.334bd804.js"><link rel="prefetch" href="/assets/js/15.3f0b462f.js"><link rel="prefetch" href="/assets/js/150.7c8c73b7.js"><link rel="prefetch" href="/assets/js/151.62d10d6c.js"><link rel="prefetch" href="/assets/js/152.82e28168.js"><link rel="prefetch" href="/assets/js/153.e1ee4321.js"><link rel="prefetch" href="/assets/js/154.f576cc10.js"><link rel="prefetch" href="/assets/js/155.964a90f2.js"><link rel="prefetch" href="/assets/js/156.4bdc75f5.js"><link rel="prefetch" href="/assets/js/157.6581cb30.js"><link rel="prefetch" href="/assets/js/158.24f9817a.js"><link rel="prefetch" href="/assets/js/159.89915418.js"><link rel="prefetch" href="/assets/js/16.d8001a48.js"><link rel="prefetch" href="/assets/js/160.643f5b36.js"><link rel="prefetch" href="/assets/js/161.4714f73e.js"><link rel="prefetch" href="/assets/js/162.7527446c.js"><link rel="prefetch" href="/assets/js/163.229f891d.js"><link rel="prefetch" href="/assets/js/164.429d3070.js"><link rel="prefetch" href="/assets/js/165.5e342261.js"><link rel="prefetch" href="/assets/js/166.f0cb088a.js"><link rel="prefetch" href="/assets/js/167.40a0038b.js"><link rel="prefetch" href="/assets/js/168.758c8238.js"><link rel="prefetch" href="/assets/js/169.a972a570.js"><link rel="prefetch" href="/assets/js/17.8a850ded.js"><link rel="prefetch" href="/assets/js/170.0fba2db3.js"><link rel="prefetch" href="/assets/js/171.43f66f94.js"><link rel="prefetch" href="/assets/js/172.9467deb8.js"><link rel="prefetch" href="/assets/js/173.26fef872.js"><link rel="prefetch" href="/assets/js/174.0958a150.js"><link rel="prefetch" href="/assets/js/175.a87b0ab5.js"><link rel="prefetch" href="/assets/js/176.04363b06.js"><link rel="prefetch" href="/assets/js/177.34672e1c.js"><link rel="prefetch" href="/assets/js/178.42e0456b.js"><link rel="prefetch" href="/assets/js/179.ec648519.js"><link rel="prefetch" href="/assets/js/18.fe4d545b.js"><link rel="prefetch" href="/assets/js/180.8a5fc825.js"><link rel="prefetch" href="/assets/js/181.3dabf704.js"><link rel="prefetch" href="/assets/js/182.e1193960.js"><link rel="prefetch" href="/assets/js/183.975cb0ee.js"><link rel="prefetch" href="/assets/js/184.a0e65b8e.js"><link rel="prefetch" href="/assets/js/185.1b24284f.js"><link rel="prefetch" href="/assets/js/186.9f5186d0.js"><link rel="prefetch" href="/assets/js/187.7b2b6fb4.js"><link rel="prefetch" href="/assets/js/188.39449f6c.js"><link rel="prefetch" href="/assets/js/189.d6c034d8.js"><link rel="prefetch" href="/assets/js/19.48cc10f6.js"><link rel="prefetch" href="/assets/js/190.2fe5508a.js"><link rel="prefetch" href="/assets/js/191.368805e9.js"><link rel="prefetch" href="/assets/js/192.8351a6ec.js"><link rel="prefetch" href="/assets/js/193.4d86bf98.js"><link rel="prefetch" href="/assets/js/194.86d3a829.js"><link rel="prefetch" href="/assets/js/195.931ce7ef.js"><link rel="prefetch" href="/assets/js/196.35818a22.js"><link rel="prefetch" href="/assets/js/197.109eef6d.js"><link rel="prefetch" href="/assets/js/198.a092c6d3.js"><link rel="prefetch" href="/assets/js/199.0a7aea6b.js"><link rel="prefetch" href="/assets/js/20.1baf39d0.js"><link rel="prefetch" href="/assets/js/200.eb75a43c.js"><link rel="prefetch" href="/assets/js/201.167f1a27.js"><link rel="prefetch" href="/assets/js/202.80380232.js"><link rel="prefetch" href="/assets/js/203.dfb07860.js"><link rel="prefetch" href="/assets/js/204.0de5d7ad.js"><link rel="prefetch" href="/assets/js/205.da83ee83.js"><link rel="prefetch" href="/assets/js/206.4ff75723.js"><link rel="prefetch" href="/assets/js/207.c0023a8f.js"><link rel="prefetch" href="/assets/js/208.e1d257d1.js"><link rel="prefetch" href="/assets/js/209.668018f6.js"><link rel="prefetch" href="/assets/js/21.b0e0d339.js"><link rel="prefetch" href="/assets/js/210.eac594b9.js"><link rel="prefetch" href="/assets/js/211.1cc3154f.js"><link rel="prefetch" href="/assets/js/212.0a3e0704.js"><link rel="prefetch" href="/assets/js/213.e5257a7e.js"><link rel="prefetch" href="/assets/js/214.a335e108.js"><link rel="prefetch" href="/assets/js/215.0422f8a3.js"><link rel="prefetch" href="/assets/js/216.6e63fc29.js"><link rel="prefetch" href="/assets/js/217.a38e1ca8.js"><link rel="prefetch" href="/assets/js/218.04c38c96.js"><link rel="prefetch" href="/assets/js/219.89a7899f.js"><link rel="prefetch" href="/assets/js/22.f5c6b71f.js"><link rel="prefetch" href="/assets/js/221.e0eded2d.js"><link rel="prefetch" href="/assets/js/222.06c16e31.js"><link rel="prefetch" href="/assets/js/223.a4b75ccb.js"><link rel="prefetch" href="/assets/js/224.9129f3cf.js"><link rel="prefetch" href="/assets/js/225.1c089563.js"><link rel="prefetch" href="/assets/js/226.8d7ae032.js"><link rel="prefetch" href="/assets/js/227.3bfa4328.js"><link rel="prefetch" href="/assets/js/228.a1748bdf.js"><link rel="prefetch" href="/assets/js/229.c1c27996.js"><link rel="prefetch" href="/assets/js/23.265953eb.js"><link rel="prefetch" href="/assets/js/230.f39a1f48.js"><link rel="prefetch" href="/assets/js/231.ca132071.js"><link rel="prefetch" href="/assets/js/232.9ca5e931.js"><link rel="prefetch" href="/assets/js/233.e04e254f.js"><link rel="prefetch" href="/assets/js/234.22381aab.js"><link rel="prefetch" href="/assets/js/235.6bc8508d.js"><link rel="prefetch" href="/assets/js/236.5914c9a6.js"><link rel="prefetch" href="/assets/js/237.a721ad82.js"><link rel="prefetch" href="/assets/js/238.af3e025d.js"><link rel="prefetch" href="/assets/js/239.44fe29c9.js"><link rel="prefetch" href="/assets/js/24.16fb3de9.js"><link rel="prefetch" href="/assets/js/240.9ba57538.js"><link rel="prefetch" href="/assets/js/241.46a9cb7e.js"><link rel="prefetch" href="/assets/js/242.ae70539b.js"><link rel="prefetch" href="/assets/js/243.8a1feaf8.js"><link rel="prefetch" href="/assets/js/244.cdbaaca6.js"><link rel="prefetch" href="/assets/js/245.7117eda6.js"><link rel="prefetch" href="/assets/js/246.742dd686.js"><link rel="prefetch" href="/assets/js/247.7046d3e0.js"><link rel="prefetch" href="/assets/js/248.dbd8407d.js"><link rel="prefetch" href="/assets/js/249.206b660b.js"><link rel="prefetch" href="/assets/js/25.21d0c0dd.js"><link rel="prefetch" href="/assets/js/250.f559b400.js"><link rel="prefetch" href="/assets/js/251.f13bd91c.js"><link rel="prefetch" href="/assets/js/252.aaa10b65.js"><link rel="prefetch" href="/assets/js/253.78640ae7.js"><link rel="prefetch" href="/assets/js/254.5251f555.js"><link rel="prefetch" href="/assets/js/255.5f8655e1.js"><link rel="prefetch" href="/assets/js/256.0b1da59b.js"><link rel="prefetch" href="/assets/js/257.c4b311d3.js"><link rel="prefetch" href="/assets/js/258.62c44f28.js"><link rel="prefetch" href="/assets/js/259.7a8ecb77.js"><link rel="prefetch" href="/assets/js/26.68bfb3cd.js"><link rel="prefetch" href="/assets/js/260.9506bc77.js"><link rel="prefetch" href="/assets/js/261.ab6ac9b0.js"><link rel="prefetch" href="/assets/js/262.6f237036.js"><link rel="prefetch" href="/assets/js/27.e08c2734.js"><link rel="prefetch" href="/assets/js/28.d05f086f.js"><link rel="prefetch" href="/assets/js/29.14bacba0.js"><link rel="prefetch" href="/assets/js/3.9859aeed.js"><link rel="prefetch" href="/assets/js/30.d1c1c795.js"><link rel="prefetch" href="/assets/js/31.c464fa16.js"><link rel="prefetch" href="/assets/js/32.74ae82b3.js"><link rel="prefetch" href="/assets/js/33.6d39a197.js"><link rel="prefetch" href="/assets/js/34.a5448e75.js"><link rel="prefetch" href="/assets/js/35.e677db99.js"><link rel="prefetch" href="/assets/js/36.9373382d.js"><link rel="prefetch" href="/assets/js/37.aaef6158.js"><link rel="prefetch" href="/assets/js/38.b8534a41.js"><link rel="prefetch" href="/assets/js/39.8e5ecefa.js"><link rel="prefetch" href="/assets/js/4.b3a2afa1.js"><link rel="prefetch" href="/assets/js/40.0fbf1e24.js"><link rel="prefetch" href="/assets/js/41.b68829b1.js"><link rel="prefetch" href="/assets/js/42.c6327e05.js"><link rel="prefetch" href="/assets/js/43.5cdcb8f5.js"><link rel="prefetch" href="/assets/js/44.48fd0994.js"><link rel="prefetch" href="/assets/js/45.45e8d731.js"><link rel="prefetch" href="/assets/js/46.ea182d63.js"><link rel="prefetch" href="/assets/js/47.3d1bf5d3.js"><link rel="prefetch" href="/assets/js/48.485f3e01.js"><link rel="prefetch" href="/assets/js/49.a2622af2.js"><link rel="prefetch" href="/assets/js/5.ddbdceff.js"><link rel="prefetch" href="/assets/js/50.572052eb.js"><link rel="prefetch" href="/assets/js/51.ed257c0f.js"><link rel="prefetch" href="/assets/js/52.23b18f3a.js"><link rel="prefetch" href="/assets/js/53.14b56cb4.js"><link rel="prefetch" href="/assets/js/54.bb07175e.js"><link rel="prefetch" href="/assets/js/55.d48bde66.js"><link rel="prefetch" href="/assets/js/56.38433979.js"><link rel="prefetch" href="/assets/js/57.99b13154.js"><link rel="prefetch" href="/assets/js/58.498c71ad.js"><link rel="prefetch" href="/assets/js/59.24e06284.js"><link rel="prefetch" href="/assets/js/6.cae33779.js"><link rel="prefetch" href="/assets/js/60.fe0260d5.js"><link rel="prefetch" href="/assets/js/61.b5bcfd89.js"><link rel="prefetch" href="/assets/js/62.bdc41a00.js"><link rel="prefetch" href="/assets/js/63.10468463.js"><link rel="prefetch" href="/assets/js/64.028e0281.js"><link rel="prefetch" href="/assets/js/65.f762d4ff.js"><link rel="prefetch" href="/assets/js/66.33239ba5.js"><link rel="prefetch" href="/assets/js/67.c89232f4.js"><link rel="prefetch" href="/assets/js/68.e2ab181e.js"><link rel="prefetch" href="/assets/js/69.86594af5.js"><link rel="prefetch" href="/assets/js/7.5bd7e1fe.js"><link rel="prefetch" href="/assets/js/70.f79bf73b.js"><link rel="prefetch" href="/assets/js/71.36d10bfe.js"><link rel="prefetch" href="/assets/js/72.85d3c063.js"><link rel="prefetch" href="/assets/js/73.4746e647.js"><link rel="prefetch" href="/assets/js/74.c8d81312.js"><link rel="prefetch" href="/assets/js/75.dd1ae94f.js"><link rel="prefetch" href="/assets/js/76.b06cc20c.js"><link rel="prefetch" href="/assets/js/77.855f7650.js"><link rel="prefetch" href="/assets/js/78.4e5b0253.js"><link rel="prefetch" href="/assets/js/79.95567ab3.js"><link rel="prefetch" href="/assets/js/8.62836d81.js"><link rel="prefetch" href="/assets/js/80.7b7033a0.js"><link rel="prefetch" href="/assets/js/81.45b93100.js"><link rel="prefetch" href="/assets/js/82.36d8eb8a.js"><link rel="prefetch" href="/assets/js/83.b361b85d.js"><link rel="prefetch" href="/assets/js/84.2e4874fa.js"><link rel="prefetch" href="/assets/js/85.272cfc57.js"><link rel="prefetch" href="/assets/js/86.aaa56439.js"><link rel="prefetch" href="/assets/js/87.dc9e3259.js"><link rel="prefetch" href="/assets/js/88.689b6a8b.js"><link rel="prefetch" href="/assets/js/89.f22e017d.js"><link rel="prefetch" href="/assets/js/9.584f1ef6.js"><link rel="prefetch" href="/assets/js/90.d0ed3f12.js"><link rel="prefetch" href="/assets/js/91.21868b2f.js"><link rel="prefetch" href="/assets/js/92.0b1bc56b.js"><link rel="prefetch" href="/assets/js/93.9fd7ccef.js"><link rel="prefetch" href="/assets/js/94.5cee5367.js"><link rel="prefetch" href="/assets/js/95.c81773d8.js"><link rel="prefetch" href="/assets/js/96.c8f61d95.js"><link rel="prefetch" href="/assets/js/97.f86ea530.js"><link rel="prefetch" href="/assets/js/98.09c0fa30.js"><link rel="prefetch" href="/assets/js/99.c4bd6444.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff3929f5.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.svg" alt="LiYang's blog" class="logo"> <span class="site-name can-hide">LiYang's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/pages/0a6679/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a6679/" class="nav-link">编程基础</a></li><li class="dropdown-item"><!----> <a href="/pages/714859/" class="nav-link">开发软件</a></li><li class="dropdown-item"><!----> <a href="/pages/690ae0/" class="nav-link">类库框架</a></li><li class="dropdown-item"><!----> <a href="/pages/d2dd63/" class="nav-link">知识进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/fd695e/" class="nav-link">工程开发</a></li><li class="dropdown-item"><!----> <a href="/pages/f37132/" class="nav-link">编程思想</a></li><li class="dropdown-item"><!----> <a href="/pages/73d90e/" class="nav-link">领域分支</a></li><li class="dropdown-item"><!----> <a href="/pages/b7eb61/" class="nav-link">社区发展</a></li><li class="dropdown-item"><!----> <a href="/pages/83b440/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0d54d7/" class="nav-link">后端知识</a></li><li class="dropdown-item"><!----> <a href="/pages/416bc0/" class="nav-link">软技能</a></li></ul></div></div><div class="nav-item"><a href="/leetCode/" class="nav-link">🤡LeetCode</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记本" class="dropdown-title"><a href="/notes/" class="link-title">笔记本</a> <span class="title" style="display:none;">笔记本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>书籍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/es6/" class="nav-link">《ES6教程》</a></li><li class="dropdown-subitem"><a href="/books/professionalJs/" class="nav-link">《JavaScript高级程序设计》</a></li></ul></li><li class="dropdown-item"><h4>教程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/course/css3-jspang/" class="nav-link">CSS3(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/es6-jspang/" class="nav-link">ES6(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/performance/" class="nav-link">性能(Google Developers)</a></li></ul></li><li class="dropdown-item"><h4>技术文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9c6617/.html" class="nav-link">leaflet中文教程</a></li></ul></li></ul></div></div> <a href="https://github.com/fineliving" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Evan Xu</h3> <span>前端界的小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/pages/0a6679/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a6679/" class="nav-link">编程基础</a></li><li class="dropdown-item"><!----> <a href="/pages/714859/" class="nav-link">开发软件</a></li><li class="dropdown-item"><!----> <a href="/pages/690ae0/" class="nav-link">类库框架</a></li><li class="dropdown-item"><!----> <a href="/pages/d2dd63/" class="nav-link">知识进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/fd695e/" class="nav-link">工程开发</a></li><li class="dropdown-item"><!----> <a href="/pages/f37132/" class="nav-link">编程思想</a></li><li class="dropdown-item"><!----> <a href="/pages/73d90e/" class="nav-link">领域分支</a></li><li class="dropdown-item"><!----> <a href="/pages/b7eb61/" class="nav-link">社区发展</a></li><li class="dropdown-item"><!----> <a href="/pages/83b440/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0d54d7/" class="nav-link">后端知识</a></li><li class="dropdown-item"><!----> <a href="/pages/416bc0/" class="nav-link">软技能</a></li></ul></div></div><div class="nav-item"><a href="/leetCode/" class="nav-link">🤡LeetCode</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记本" class="dropdown-title"><a href="/notes/" class="link-title">笔记本</a> <span class="title" style="display:none;">笔记本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>书籍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/es6/" class="nav-link">《ES6教程》</a></li><li class="dropdown-subitem"><a href="/books/professionalJs/" class="nav-link">《JavaScript高级程序设计》</a></li></ul></li><li class="dropdown-item"><h4>教程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/course/css3-jspang/" class="nav-link">CSS3(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/es6-jspang/" class="nav-link">ES6(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/performance/" class="nav-link">性能(Google Developers)</a></li></ul></li><li class="dropdown-item"><h4>技术文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9c6617/.html" class="nav-link">leaflet中文教程</a></li></ul></li></ul></div></div> <a href="https://github.com/fineliving" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/932a6d/" class="sidebar-link">性能为何至关重要</a></li><li><a href="/pages/5c6fa0/" class="sidebar-link">使用 RAIL 模型评估性能</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>加载性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/3da005/" class="sidebar-link">总览</a></li><li><a href="/pages/5af7d4/" class="sidebar-link">如何测量速度？</a></li><li><a href="/pages/7c5d18/" class="sidebar-link">文字内容</a></li><li><a href="/pages/79cdb9/" class="sidebar-link">图形内容</a></li><li><a href="/pages/f4a116/" class="sidebar-link">HTTP请求</a></li><li><a href="/pages/998cd7/" class="sidebar-link">HTTP缓存</a></li><li><a href="/pages/cb3ca9/" class="sidebar-link">总结和演示</a></li><li><a href="/pages/ed916f/" class="sidebar-link">速度工具</a></li><li><a href="/pages/200943/" class="sidebar-link">通过导航和资源定时评估加载性能</a></li><li><a href="/pages/13c2e2/" class="sidebar-link">以用户为中心的性能指标</a></li><li><a href="/pages/30d447/" class="sidebar-link">了解低带宽和高延迟</a></li><li><a href="/pages/029c6a/" class="sidebar-link">优化内容效率</a></li><li><a href="/pages/1c8f87/" class="sidebar-link">避免不必要的下载</a></li><li><a href="/pages/9c6617/" aria-current="page" class="active sidebar-link">优化基于文本的资产的编码和传送大小</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9c6617/#数据压缩基础知识" class="sidebar-link">数据压缩基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9c6617/#tl-dr" class="sidebar-link">TL;DR</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/9c6617/#源码压缩-预处理和环境特定优化" class="sidebar-link">源码压缩：预处理和环境特定优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9c6617/#tl-dr-2" class="sidebar-link">TL;DR</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/9c6617/#通过-gzip-压缩文本" class="sidebar-link">通过 GZIP 压缩文本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9c6617/#tl-dr-3" class="sidebar-link">TL;DR</a></li></ul></li></ul></li><li><a href="/pages/000317/" class="sidebar-link">JavaScript启动优化</a></li><li><a href="/pages/d9771b/" class="sidebar-link">加载第三方JavaScript</a></li><li><a href="/pages/16e316/" class="sidebar-link">网页字体优化</a></li><li><a href="/pages/0497ba/" class="sidebar-link">通过客户提示适应用户</a></li><li><a href="/pages/d34d56/" class="sidebar-link">通过保存数据交付快速轻便的应用程序</a></li><li><a href="/pages/b5f9f1/" class="sidebar-link">通过摇树来减少JavaScript负载</a></li><li><a href="/pages/a0ed26/" class="sidebar-link">离线指南</a></li><li><a href="/pages/690a1a/" class="sidebar-link">网页存储概览</a></li><li><a href="/pages/b84219/" class="sidebar-link">使用IndexedDB的最佳实践</a></li><li><a href="/pages/65f486/" class="sidebar-link">Offline UX 注意事项</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>精心安排加载</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/371041/" class="sidebar-link">关键渲染路径</a></li><li><a href="/pages/f31118/" class="sidebar-link">构建对象模型</a></li><li><a href="/pages/739b11/" class="sidebar-link">渲染树构建、布局及绘制</a></li><li><a href="/pages/b9d842/" class="sidebar-link">阻塞渲染的CSS</a></li><li><a href="/pages/f005c3/" class="sidebar-link">使用JavaScript添加交互</a></li><li><a href="/pages/1d7873/" class="sidebar-link">评估关键渲染路径</a></li><li><a href="/pages/3b99f9/" class="sidebar-link">分析关键渲染路径性能</a></li><li><a href="/pages/0c6644/" class="sidebar-link">优化关键渲染路径</a></li><li><a href="/pages/baf7eb/" class="sidebar-link">PageSpeed规则和建议</a></li><li><a href="/pages/4f4df7/" class="sidebar-link">HTTP/2简介</a></li><li><a href="/pages/65a803/" class="sidebar-link">使用PRPL模式应用即时加载</a></li><li><a href="/pages/08c756/" class="sidebar-link">资源优先级–让浏览器助您一臂之力</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>利用webpack优化web性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c18ffb/" class="sidebar-link">介绍</a></li><li><a href="/pages/ec3b6e/" class="sidebar-link">减小前端大小</a></li><li><a href="/pages/8bf683/" class="sidebar-link">利用长期缓存</a></li><li><a href="/pages/0e8875/" class="sidebar-link">monitor-and-analyze</a></li><li><a href="/pages/7cfdc0/" class="sidebar-link">结论</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>渲染性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7f377b/" class="sidebar-link">渲染性能</a></li><li><a href="/pages/ccf0ef/" class="sidebar-link">优化JavaScript执行</a></li><li><a href="/pages/bdf4e6/" class="sidebar-link">缩小样式计算的范围并降低其复杂性</a></li><li><a href="/pages/270241/" class="sidebar-link">简化绘制的复杂度、减小绘制区域</a></li><li><a href="/pages/ad1d46/" class="sidebar-link">坚持仅合成器的属性和管理层计数</a></li><li><a href="/pages/de7324/" class="sidebar-link">使输入处理程序去除抖动</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>审核网站</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/29e252/" class="sidebar-link">审核</a></li><li><a href="/pages/ec49df/" class="sidebar-link">准备工作</a></li><li><a href="/pages/c4f089/" class="sidebar-link">检查网站安全</a></li><li><a href="/pages/b7e0b0/" class="sidebar-link">测量性能工具</a></li><li><a href="/pages/bac92b/" class="sidebar-link">分享结果</a></li><li><a href="/pages/e05301/" class="sidebar-link">下一步</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/course/performance" title="《性能(Google Developers)》-目录页" data-v-1cd794fe>《性能(Google Developers)》</a></li> <li data-v-1cd794fe><a href="/course/performance/#加载性能" title="《性能(Google Developers)》#加载性能" data-v-1cd794fe>加载性能</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/fineliving" target="_blank" title="作者" class="beLink" data-v-1cd794fe>Li Yang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2020-11-20</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          优化基于文本的资产的编码和传送大小
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="优化基于文本的资产的编码和传送大小"><a href="#优化基于文本的资产的编码和传送大小" class="header-anchor">#</a> 优化基于文本的资产的编码和传送大小</h1> <p>除了避免不必要的资源下载，在提高网页加载速度上您可以采取的最有效措施就是，通过优化和压缩其余资源来最大限度减小总下载大小。</p> <h2 id="数据压缩基础知识"><a href="#数据压缩基础知识" class="header-anchor">#</a> 数据压缩基础知识</h2> <p>在您消除了任何不必要的资源之后，下一步就是对浏览器需要下载的其余资源进行压缩。 根据资源类型（文本、图像、字体等），您可使用许多不同的技术：可在服务器上启用的通用工具、适用于特定内容类型的预处理优化以及需要开发者输入的资源特定优化。</p> <p>实现最佳性能需要组合使用上述所有技术。</p> <h3 id="tl-dr"><a href="#tl-dr" class="header-anchor">#</a> TL;DR</h3> <ul><li>压缩就是使用更少的位对信息进行编码的过程。</li> <li>消除不必要的数据总是会产生最好的结果。</li> <li>有许多种不同的压缩技术和算法。</li> <li>您需要利用各种技术来实现最佳压缩。</li></ul> <p>减小数据大小的过程称为<em>数据压缩</em>。 许多人致力于算法、技术和优化研究，以期提高各种压缩程序的压缩比率、速度和内存要求。 详细讨论数据压缩超出了本主题的范围。 但是，概要了解压缩的工作原理以及在减小网页所需各类资产大小方面可供我们利用的技术，仍具有重要意义。</p> <p>为说明这些技术的核心原理，我们看看如何优化一种简单的短信格式（不过是我们专为此示例编造的格式）：</p> <div class="language- extra-class"><pre class="language-text"><code># Below is a secret message, which consists of a set of headers in
# key-value format followed by a newline and the encrypted message.
format: secret-cipher
date:08/25/16
AAAZZBBBBEEEMMM EEETTTAAA
</code></pre></div><ol><li>短信可能包含任意注释，以“#”前缀表示。 注释不影响短信的含义或任何其他行为。</li> <li>短信可能包含键-值对形式并显示在短信开头的<em>标头</em>（以“:”分隔）。</li> <li>短信带有文本负载。</li></ol> <p>您有什么办法可以减小上面这条 200 个字符长短信的大小呢？</p> <ol><li>注释是很有意思，但它实际上并不影响短信的含义， 因此您可以在传送短信时将其去掉。</li> <li>或许您可以利用某些出色技术对标头进行高效编码。 例如，如果您知道所有短信都包含“format”和“date”，您就可以将它们转换成短整型 ID 并只发送这些 ID。 不过，情况可能不是这样，您可以暂时不予理会。</li> <li>负载是纯文本，尽管我们不知道其实际内容（显然，它使用的是一种“secret-message”），但只需看一看文本内容，就会发现其中存在大量多余内容。 或许，您可以不发送重复的字母，而是直接对重复的字母计数，再对它们进行更高效的编码。 例如，将“AAA”编码成“3A”，表示三个 A 的序列。</li></ol> <p>组合使用这些技术可以实现下面的结果：</p> <div class="language- extra-class"><pre class="language-text"><code>format: secret-cipher
date:08/25/16
3A2Z4B3E3M 3E3T3A
</code></pre></div><p>新短信的长度为 56 个字符，这意味着您已将原有短信压缩了 72%，确实令人吃惊。</p> <p>好是好，但这对优化网页有什么帮助吗？我们不会尝试发明自己的压缩算法，但正如您将会看到的那样，我们在优化网页上的各种资源时，将会采用完全相同的技术和思维方式：预处理、环境特定优化以及为不同的内容采用不同的算法。</p> <h2 id="源码压缩-预处理和环境特定优化"><a href="#源码压缩-预处理和环境特定优化" class="header-anchor">#</a> 源码压缩：预处理和环境特定优化</h2> <h3 id="tl-dr-2"><a href="#tl-dr-2" class="header-anchor">#</a> TL;DR</h3> <ul><li>内容特定优化可显著减小所提供资源的大小。</li> <li>内容特定优化在内部版本/发行版本周期内应用的效果最好。</li></ul> <p>压缩冗余或不必要数据的最佳方法是将其全部消除。 我们不能只是删除任意数据，但在某些环境中，我们可能对数据格式及其属性有内容特定了解，往往可以在不影响其实际含义的情况下显著减小负载的大小。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;html&gt;
  &lt;head&gt;
  &lt;style&gt;
     /* awesome-container is only used on the landing page */
     .awesome-container { font-size: 120% }
     .awesome-container { width: 50% }
  &lt;/style&gt;
 &lt;/head&gt;

 &lt;body&gt;
   &lt;!-- awesome container content: START --&gt;
    &lt;div&gt;…&lt;/div&gt;
   &lt;!-- awesome container content: END --&gt;
   &lt;script&gt;
     awesomeAnalytics(); // beacon conversion metrics
   &lt;/script&gt;
 &lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p><a href="https://googlesamples.github.io/web-fundamentals/fundamentals/performance/optimizing-content-efficiency/minify.html" target="_blank" rel="noopener noreferrer">试一下<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>以上面这个简单 HTML 网页及其包含的三个不同内容类型为例： HTML 标记、CSS 样式和 JavaScript。 其中的每一个内容类型针对构成有效内容的元素都具有不同的规则，在注释指示等方面也具有不同的规则。 我们如何才能减小这个网页的大小呢？</p> <ul><li>代码注释是开发者最常用的工具，但不需要出现在浏览器中！ 直接删除 CSS (<code>/* … */</code>)、HTML (``) 和 JavaScript (<code>// …</code>) 注释可显著减小网页的总大小。</li> <li>“智能”CSS 压缩程序会注意到采用低效率的方式为“.awesome-container”定义规则，并且会将两个声明折叠为一个而不影响任何其他样式，从而节省更多字节。</li> <li>空白（空格和制表符）能够在 HTML、CSS 和 JavaScript 中给开发者提供方便。 可以增加一个压缩程序来去掉所有制表符和空格。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;html&gt;&lt;head&gt;&lt;style&gt;.awesome-container{font-size:120%;width: 50%}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;…&lt;/div&gt;&lt;script&gt;awesomeAnalytics();
&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;
</code></pre></div><p><a href="https://googlesamples.github.io/web-fundamentals/fundamentals/performance/optimizing-content-efficiency/minified.html" target="_blank" rel="noopener noreferrer">试一下<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>执行以上步骤后，可将网页字符数从 406 缩减到 150，缩减率高达 63%。 不得不承认，其可读性不太好，但其实也不必具有多好的可读性：您可以保留原始网页作为“开发版本”，然后在您准备好在网站上发布网页时再执行以上步骤。</p> <p>退一步讲，上例说明了一个要点：通用压缩程序（例如设计用于压缩任意文本的压缩程序）在压缩以上网页时可能同样可以取得相当不错的效果，但永远别指望它能去除注释、折叠 CSS 规则或者进行大量的其他内容特定优化。 正因如此，预处理/源码压缩/环境感知优化才会成为功能如此强大的工具。</p> <p>注：举个有说服力的例子，jQuery 内容库未压缩开发版本的大小现已接近大约 300KB。 而压缩（移除注解等内容）后同一内容库的大小仅为原来的大约 1/3：大约 100KB。</p> <p>同理，可以将以上技术运用到基于文本的资产以外的其他领域。 图像、视频以及其他内容类型都包含其自己的元数据形式和各种负载。 例如，每当您使用相机拍摄照片时，照片通常也会嵌入大量额外的信息：相机设置、位置等等。 视具体应用而定，这些数据可能很关键（例如照片分享网站），也可能毫无用处，因此您应该考虑将其删除是否值得。 事实上，每一幅图像的这些元数据加起来可能多达数万字节。</p> <p>简言之，作为优化资产效率的第一步，您需要建立一个不同内容类型的清单，并考虑可以进行哪些类型的内容特定优化来减小其大小。 然后，在您确定具体的优化后，通过将其加入内部版本和发行版本流程来自动执行这些优化，以便确保优化一直有效。</p> <h2 id="通过-gzip-压缩文本"><a href="#通过-gzip-压缩文本" class="header-anchor">#</a> 通过 GZIP 压缩文本</h2> <h3 id="tl-dr-3"><a href="#tl-dr-3" class="header-anchor">#</a> TL;DR</h3> <ul><li>GZIP 对基于文本的资产的压缩效果最好：CSS、JavaScript 和 HTML。</li> <li>所有现代浏览器都支持 GZIP 压缩，并且会自动请求该压缩。</li> <li>您的服务器必须配置为启用 GZIP 压缩。</li> <li>某些 CDN 需要特别注意以确保 GZIP 已启用。</li></ul> <p><a href="https://en.wikipedia.org/wiki/Gzip" target="_blank" rel="noopener noreferrer">GZIP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一种可以作用于任何字节流的通用压缩程序。 它会在后台记忆一些之前看到的内容，并尝试以高效方式查找并替换重复的数据片段。 （欲知详情，请参阅<a href="https://www.youtube.com/watch?v=whGwm0Lky2s&amp;feature=youtu.be&amp;t=14m11s" target="_blank" rel="noopener noreferrer">浅显易懂的 GZIP 低阶说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。）但实际上，GZIP 对基于文本的内容的压缩效果最好，在压缩较大文件时往往可实现高达 70-90% 的压缩率，而如果对已经通过替代算法压缩过的资产（例如，大多数图片格式）运行 GZIP，则效果甚微，甚至毫无效果。</p> <p>所有现代浏览器都支持并自动协商将 GZIP 压缩用于所有 HTTP 请求。 您必须确保服务器得到正确配置，能够在客户端请求时提供压缩过的资源。</p> <table><thead><tr><th style="text-align:left;">内容库</th> <th style="text-align:left;">大小</th> <th style="text-align:left;">压缩后大小</th> <th style="text-align:left;">压缩比率</th></tr></thead> <tbody><tr><td style="text-align:left;">jquery-1.11.0.js</td> <td style="text-align:left;">276 KB</td> <td style="text-align:left;">82 KB</td> <td style="text-align:left;">70%</td></tr> <tr><td style="text-align:left;">jquery-1.11.0.min.js</td> <td style="text-align:left;">94 KB</td> <td style="text-align:left;">33 KB</td> <td style="text-align:left;">65%</td></tr> <tr><td style="text-align:left;">angular-1.2.15.js</td> <td style="text-align:left;">729 KB</td> <td style="text-align:left;">182 KB</td> <td style="text-align:left;">75%</td></tr> <tr><td style="text-align:left;">angular-1.2.15.min.js</td> <td style="text-align:left;">101 KB</td> <td style="text-align:left;">37 KB</td> <td style="text-align:left;">63%</td></tr> <tr><td style="text-align:left;">bootstrap-3.1.1.css</td> <td style="text-align:left;">118 KB</td> <td style="text-align:left;">18 KB</td> <td style="text-align:left;">85%</td></tr> <tr><td style="text-align:left;">bootstrap-3.1.1.min.css</td> <td style="text-align:left;">98 KB</td> <td style="text-align:left;">17 KB</td> <td style="text-align:left;">83%</td></tr> <tr><td style="text-align:left;">foundation-5.css</td> <td style="text-align:left;">186 KB</td> <td style="text-align:left;">22 KB</td> <td style="text-align:left;">88%</td></tr> <tr><td style="text-align:left;">foundation-5.min.css</td> <td style="text-align:left;">146 KB</td> <td style="text-align:left;">18 KB</td> <td style="text-align:left;">88%</td></tr></tbody></table> <p>上表显示了 GZIP 压缩对几种最流行的 JavaScript 内容库和 CSS 框架可实现的压缩率。 压缩率范围为 60% 至 88%，将文件压缩源码后（产生文件名中包含“.min”的文件），再使用 GZIP 进行压缩，可进一步提高压缩率。</p> <ol><li><strong>先应用内容特定优化：CSS、JS 和 HTML 压缩源码程序。</strong></li> <li><strong>采用 GZIP 对压缩源码后的输出进行压缩。</strong></li></ol> <p>启用 GZIP 是实现起来最简单并且回报最高的优化之一，遗憾的是，仍有许多人未曾实现。 大多数网络服务器都会代您完成压缩内容的工作，您只需要确认服务器进行了正确配置，能够对所有可受益于 GZIP 压缩的内容进行压缩即可。</p> <p>HTML5 Boilerplate 项目包含所有最流行服务器的<a href="https://github.com/h5bp/server-configs" target="_blank" rel="noopener noreferrer">配置文件样例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，其中为每个配置标志和设置都提供了详细的注解。 要为您的服务器确定最佳配置，请执行以下操作：</p> <ul><li>在列表中找到您喜爱的服务器。</li> <li>查找 GZIP 部分。</li> <li>确认您的服务器配置了推荐的设置。</li></ul> <p><img src="https://developers.google.cn/web/fundamentals/performance/optimizing-content-efficiency/images/transfer-vs-actual-size.png" alt="DevTools 实际大小与传送大小演示"></p> <p>可通过以下这种快速而又简单的方法了解 GZIP 的实用效果：打开 Chrome DevTools，然后检查 Network 面板中的 Size / Content 列： Size 表示资产的传送大小，Content 表示资产的未压缩大小。 对于上例中的 HTML 资产，GZIP 在传送时节省了 98.8KB。</p> <p>注：GZIP 有时会增加资产的大小。 当资产非常小且 GZIP 字典的开销大于压缩缩减的大小时，或者资源已经得到充分压缩时，通常会发生这种情况。 为了避免此问题，某些服务器允许您指定最小文件大小阈值。</p> <p>最后，尽管大多数服务器会在向用户提供这些资产时自动对其进行压缩，但某些 CDN 需要特别注意和手动操作，以确保提供 GZIP 资产。 务请审核您的网站并确保资产确实<a href="http://www.whatsmyip.org/http-compression-test/" target="_blank" rel="noopener noreferrer">得到压缩<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/1c8f87/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">避免不必要的下载</div></a> <a href="/pages/000317/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">JavaScript启动优化</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/1c8f87/" class="prev">避免不必要的下载</a></span> <span class="next"><a href="/pages/000317/">JavaScript启动优化</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/1c4e14/"><div>你想知道的css hack知识全都帮你整理好了</div></a> <span>06-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/d8a080/"><div>问题和经验</div></a> <span>06-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/a93118/"><div>CSS Hack</div></a> <span>06-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xugaoyi" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2021
    <span>Evan Xu | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.40794b05.js" defer></script><script src="/assets/js/2.21c2c3d2.js" defer></script><script src="/assets/js/220.02a01cb8.js" defer></script>
  </body>
</html>