<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>减小前端大小 | LiYang&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <link rel="preload" href="/assets/css/0.styles.ff3929f5.css" as="style"><link rel="preload" href="/assets/js/app.40794b05.js" as="script"><link rel="preload" href="/assets/js/2.21c2c3d2.js" as="script"><link rel="preload" href="/assets/js/244.cdbaaca6.js" as="script"><link rel="prefetch" href="/assets/js/10.058f7072.js"><link rel="prefetch" href="/assets/js/100.f3568421.js"><link rel="prefetch" href="/assets/js/101.3669cd11.js"><link rel="prefetch" href="/assets/js/102.cefa1450.js"><link rel="prefetch" href="/assets/js/103.0fc12baa.js"><link rel="prefetch" href="/assets/js/104.fc75b27c.js"><link rel="prefetch" href="/assets/js/105.9efa40da.js"><link rel="prefetch" href="/assets/js/106.2132845c.js"><link rel="prefetch" href="/assets/js/107.50efbf3f.js"><link rel="prefetch" href="/assets/js/108.2e4d6b56.js"><link rel="prefetch" href="/assets/js/109.362f4964.js"><link rel="prefetch" href="/assets/js/11.acbb83b6.js"><link rel="prefetch" href="/assets/js/110.260ecf9d.js"><link rel="prefetch" href="/assets/js/111.ac0ed6b0.js"><link rel="prefetch" href="/assets/js/112.e26ce83f.js"><link rel="prefetch" href="/assets/js/113.c17594f4.js"><link rel="prefetch" href="/assets/js/114.081ea0e8.js"><link rel="prefetch" href="/assets/js/115.9f1c1fc5.js"><link rel="prefetch" href="/assets/js/116.300e5c32.js"><link rel="prefetch" href="/assets/js/117.005796a9.js"><link rel="prefetch" href="/assets/js/118.5dd34410.js"><link rel="prefetch" href="/assets/js/119.2a52edee.js"><link rel="prefetch" href="/assets/js/12.f5d0a92b.js"><link rel="prefetch" href="/assets/js/120.2692504f.js"><link rel="prefetch" href="/assets/js/121.de91fbab.js"><link rel="prefetch" href="/assets/js/122.8fe54cb7.js"><link rel="prefetch" href="/assets/js/123.27f7de3d.js"><link rel="prefetch" href="/assets/js/124.df486141.js"><link rel="prefetch" href="/assets/js/125.b3333a19.js"><link rel="prefetch" href="/assets/js/126.0252235d.js"><link rel="prefetch" href="/assets/js/127.e416e0cb.js"><link rel="prefetch" href="/assets/js/128.80fc9ce8.js"><link rel="prefetch" href="/assets/js/129.d549459c.js"><link rel="prefetch" href="/assets/js/13.c75b92e4.js"><link rel="prefetch" href="/assets/js/130.535fd734.js"><link rel="prefetch" href="/assets/js/131.9d165e98.js"><link rel="prefetch" href="/assets/js/132.ef795834.js"><link rel="prefetch" href="/assets/js/133.2044b8d2.js"><link rel="prefetch" href="/assets/js/134.ea0aee7d.js"><link rel="prefetch" href="/assets/js/135.6f39d3e5.js"><link rel="prefetch" href="/assets/js/136.47dc0812.js"><link rel="prefetch" href="/assets/js/137.3eaf9788.js"><link rel="prefetch" href="/assets/js/138.1135d0ed.js"><link rel="prefetch" href="/assets/js/139.d546d7cb.js"><link rel="prefetch" href="/assets/js/14.1114043e.js"><link rel="prefetch" href="/assets/js/140.aae58cac.js"><link rel="prefetch" href="/assets/js/141.b8b72927.js"><link rel="prefetch" href="/assets/js/142.b161cba1.js"><link rel="prefetch" href="/assets/js/143.cfb7b204.js"><link rel="prefetch" href="/assets/js/144.818c2cff.js"><link rel="prefetch" href="/assets/js/145.60f90c39.js"><link rel="prefetch" href="/assets/js/146.7ddef663.js"><link rel="prefetch" href="/assets/js/147.06d1017e.js"><link rel="prefetch" href="/assets/js/148.c7c411a0.js"><link rel="prefetch" href="/assets/js/149.334bd804.js"><link rel="prefetch" href="/assets/js/15.3f0b462f.js"><link rel="prefetch" href="/assets/js/150.7c8c73b7.js"><link rel="prefetch" href="/assets/js/151.62d10d6c.js"><link rel="prefetch" href="/assets/js/152.82e28168.js"><link rel="prefetch" href="/assets/js/153.e1ee4321.js"><link rel="prefetch" href="/assets/js/154.f576cc10.js"><link rel="prefetch" href="/assets/js/155.964a90f2.js"><link rel="prefetch" href="/assets/js/156.4bdc75f5.js"><link rel="prefetch" href="/assets/js/157.6581cb30.js"><link rel="prefetch" href="/assets/js/158.24f9817a.js"><link rel="prefetch" href="/assets/js/159.89915418.js"><link rel="prefetch" href="/assets/js/16.d8001a48.js"><link rel="prefetch" href="/assets/js/160.643f5b36.js"><link rel="prefetch" href="/assets/js/161.4714f73e.js"><link rel="prefetch" href="/assets/js/162.7527446c.js"><link rel="prefetch" href="/assets/js/163.229f891d.js"><link rel="prefetch" href="/assets/js/164.429d3070.js"><link rel="prefetch" href="/assets/js/165.5e342261.js"><link rel="prefetch" href="/assets/js/166.f0cb088a.js"><link rel="prefetch" href="/assets/js/167.40a0038b.js"><link rel="prefetch" href="/assets/js/168.758c8238.js"><link rel="prefetch" href="/assets/js/169.a972a570.js"><link rel="prefetch" href="/assets/js/17.8a850ded.js"><link rel="prefetch" href="/assets/js/170.0fba2db3.js"><link rel="prefetch" href="/assets/js/171.43f66f94.js"><link rel="prefetch" href="/assets/js/172.9467deb8.js"><link rel="prefetch" href="/assets/js/173.26fef872.js"><link rel="prefetch" href="/assets/js/174.0958a150.js"><link rel="prefetch" href="/assets/js/175.a87b0ab5.js"><link rel="prefetch" href="/assets/js/176.04363b06.js"><link rel="prefetch" href="/assets/js/177.34672e1c.js"><link rel="prefetch" href="/assets/js/178.42e0456b.js"><link rel="prefetch" href="/assets/js/179.ec648519.js"><link rel="prefetch" href="/assets/js/18.fe4d545b.js"><link rel="prefetch" href="/assets/js/180.8a5fc825.js"><link rel="prefetch" href="/assets/js/181.3dabf704.js"><link rel="prefetch" href="/assets/js/182.e1193960.js"><link rel="prefetch" href="/assets/js/183.975cb0ee.js"><link rel="prefetch" href="/assets/js/184.a0e65b8e.js"><link rel="prefetch" href="/assets/js/185.1b24284f.js"><link rel="prefetch" href="/assets/js/186.9f5186d0.js"><link rel="prefetch" href="/assets/js/187.7b2b6fb4.js"><link rel="prefetch" href="/assets/js/188.39449f6c.js"><link rel="prefetch" href="/assets/js/189.d6c034d8.js"><link rel="prefetch" href="/assets/js/19.48cc10f6.js"><link rel="prefetch" href="/assets/js/190.2fe5508a.js"><link rel="prefetch" href="/assets/js/191.368805e9.js"><link rel="prefetch" href="/assets/js/192.8351a6ec.js"><link rel="prefetch" href="/assets/js/193.4d86bf98.js"><link rel="prefetch" href="/assets/js/194.86d3a829.js"><link rel="prefetch" href="/assets/js/195.931ce7ef.js"><link rel="prefetch" href="/assets/js/196.35818a22.js"><link rel="prefetch" href="/assets/js/197.109eef6d.js"><link rel="prefetch" href="/assets/js/198.a092c6d3.js"><link rel="prefetch" href="/assets/js/199.0a7aea6b.js"><link rel="prefetch" href="/assets/js/20.1baf39d0.js"><link rel="prefetch" href="/assets/js/200.eb75a43c.js"><link rel="prefetch" href="/assets/js/201.167f1a27.js"><link rel="prefetch" href="/assets/js/202.80380232.js"><link rel="prefetch" href="/assets/js/203.dfb07860.js"><link rel="prefetch" href="/assets/js/204.0de5d7ad.js"><link rel="prefetch" href="/assets/js/205.da83ee83.js"><link rel="prefetch" href="/assets/js/206.4ff75723.js"><link rel="prefetch" href="/assets/js/207.c0023a8f.js"><link rel="prefetch" href="/assets/js/208.e1d257d1.js"><link rel="prefetch" href="/assets/js/209.668018f6.js"><link rel="prefetch" href="/assets/js/21.b0e0d339.js"><link rel="prefetch" href="/assets/js/210.eac594b9.js"><link rel="prefetch" href="/assets/js/211.1cc3154f.js"><link rel="prefetch" href="/assets/js/212.0a3e0704.js"><link rel="prefetch" href="/assets/js/213.e5257a7e.js"><link rel="prefetch" href="/assets/js/214.a335e108.js"><link rel="prefetch" href="/assets/js/215.0422f8a3.js"><link rel="prefetch" href="/assets/js/216.6e63fc29.js"><link rel="prefetch" href="/assets/js/217.a38e1ca8.js"><link rel="prefetch" href="/assets/js/218.04c38c96.js"><link rel="prefetch" href="/assets/js/219.89a7899f.js"><link rel="prefetch" href="/assets/js/22.f5c6b71f.js"><link rel="prefetch" href="/assets/js/220.02a01cb8.js"><link rel="prefetch" href="/assets/js/221.e0eded2d.js"><link rel="prefetch" href="/assets/js/222.06c16e31.js"><link rel="prefetch" href="/assets/js/223.a4b75ccb.js"><link rel="prefetch" href="/assets/js/224.9129f3cf.js"><link rel="prefetch" href="/assets/js/225.1c089563.js"><link rel="prefetch" href="/assets/js/226.8d7ae032.js"><link rel="prefetch" href="/assets/js/227.3bfa4328.js"><link rel="prefetch" href="/assets/js/228.a1748bdf.js"><link rel="prefetch" href="/assets/js/229.c1c27996.js"><link rel="prefetch" href="/assets/js/23.265953eb.js"><link rel="prefetch" href="/assets/js/230.f39a1f48.js"><link rel="prefetch" href="/assets/js/231.ca132071.js"><link rel="prefetch" href="/assets/js/232.9ca5e931.js"><link rel="prefetch" href="/assets/js/233.e04e254f.js"><link rel="prefetch" href="/assets/js/234.22381aab.js"><link rel="prefetch" href="/assets/js/235.6bc8508d.js"><link rel="prefetch" href="/assets/js/236.5914c9a6.js"><link rel="prefetch" href="/assets/js/237.a721ad82.js"><link rel="prefetch" href="/assets/js/238.af3e025d.js"><link rel="prefetch" href="/assets/js/239.44fe29c9.js"><link rel="prefetch" href="/assets/js/24.16fb3de9.js"><link rel="prefetch" href="/assets/js/240.9ba57538.js"><link rel="prefetch" href="/assets/js/241.46a9cb7e.js"><link rel="prefetch" href="/assets/js/242.ae70539b.js"><link rel="prefetch" href="/assets/js/243.8a1feaf8.js"><link rel="prefetch" href="/assets/js/245.7117eda6.js"><link rel="prefetch" href="/assets/js/246.742dd686.js"><link rel="prefetch" href="/assets/js/247.7046d3e0.js"><link rel="prefetch" href="/assets/js/248.dbd8407d.js"><link rel="prefetch" href="/assets/js/249.206b660b.js"><link rel="prefetch" href="/assets/js/25.21d0c0dd.js"><link rel="prefetch" href="/assets/js/250.f559b400.js"><link rel="prefetch" href="/assets/js/251.f13bd91c.js"><link rel="prefetch" href="/assets/js/252.aaa10b65.js"><link rel="prefetch" href="/assets/js/253.78640ae7.js"><link rel="prefetch" href="/assets/js/254.5251f555.js"><link rel="prefetch" href="/assets/js/255.5f8655e1.js"><link rel="prefetch" href="/assets/js/256.0b1da59b.js"><link rel="prefetch" href="/assets/js/257.c4b311d3.js"><link rel="prefetch" href="/assets/js/258.62c44f28.js"><link rel="prefetch" href="/assets/js/259.7a8ecb77.js"><link rel="prefetch" href="/assets/js/26.68bfb3cd.js"><link rel="prefetch" href="/assets/js/260.9506bc77.js"><link rel="prefetch" href="/assets/js/261.ab6ac9b0.js"><link rel="prefetch" href="/assets/js/262.6f237036.js"><link rel="prefetch" href="/assets/js/27.e08c2734.js"><link rel="prefetch" href="/assets/js/28.d05f086f.js"><link rel="prefetch" href="/assets/js/29.14bacba0.js"><link rel="prefetch" href="/assets/js/3.9859aeed.js"><link rel="prefetch" href="/assets/js/30.d1c1c795.js"><link rel="prefetch" href="/assets/js/31.c464fa16.js"><link rel="prefetch" href="/assets/js/32.74ae82b3.js"><link rel="prefetch" href="/assets/js/33.6d39a197.js"><link rel="prefetch" href="/assets/js/34.a5448e75.js"><link rel="prefetch" href="/assets/js/35.e677db99.js"><link rel="prefetch" href="/assets/js/36.9373382d.js"><link rel="prefetch" href="/assets/js/37.aaef6158.js"><link rel="prefetch" href="/assets/js/38.b8534a41.js"><link rel="prefetch" href="/assets/js/39.8e5ecefa.js"><link rel="prefetch" href="/assets/js/4.b3a2afa1.js"><link rel="prefetch" href="/assets/js/40.0fbf1e24.js"><link rel="prefetch" href="/assets/js/41.b68829b1.js"><link rel="prefetch" href="/assets/js/42.c6327e05.js"><link rel="prefetch" href="/assets/js/43.5cdcb8f5.js"><link rel="prefetch" href="/assets/js/44.48fd0994.js"><link rel="prefetch" href="/assets/js/45.45e8d731.js"><link rel="prefetch" href="/assets/js/46.ea182d63.js"><link rel="prefetch" href="/assets/js/47.3d1bf5d3.js"><link rel="prefetch" href="/assets/js/48.485f3e01.js"><link rel="prefetch" href="/assets/js/49.a2622af2.js"><link rel="prefetch" href="/assets/js/5.ddbdceff.js"><link rel="prefetch" href="/assets/js/50.572052eb.js"><link rel="prefetch" href="/assets/js/51.ed257c0f.js"><link rel="prefetch" href="/assets/js/52.23b18f3a.js"><link rel="prefetch" href="/assets/js/53.14b56cb4.js"><link rel="prefetch" href="/assets/js/54.bb07175e.js"><link rel="prefetch" href="/assets/js/55.d48bde66.js"><link rel="prefetch" href="/assets/js/56.38433979.js"><link rel="prefetch" href="/assets/js/57.99b13154.js"><link rel="prefetch" href="/assets/js/58.498c71ad.js"><link rel="prefetch" href="/assets/js/59.24e06284.js"><link rel="prefetch" href="/assets/js/6.cae33779.js"><link rel="prefetch" href="/assets/js/60.fe0260d5.js"><link rel="prefetch" href="/assets/js/61.b5bcfd89.js"><link rel="prefetch" href="/assets/js/62.bdc41a00.js"><link rel="prefetch" href="/assets/js/63.10468463.js"><link rel="prefetch" href="/assets/js/64.028e0281.js"><link rel="prefetch" href="/assets/js/65.f762d4ff.js"><link rel="prefetch" href="/assets/js/66.33239ba5.js"><link rel="prefetch" href="/assets/js/67.c89232f4.js"><link rel="prefetch" href="/assets/js/68.e2ab181e.js"><link rel="prefetch" href="/assets/js/69.86594af5.js"><link rel="prefetch" href="/assets/js/7.5bd7e1fe.js"><link rel="prefetch" href="/assets/js/70.f79bf73b.js"><link rel="prefetch" href="/assets/js/71.36d10bfe.js"><link rel="prefetch" href="/assets/js/72.85d3c063.js"><link rel="prefetch" href="/assets/js/73.4746e647.js"><link rel="prefetch" href="/assets/js/74.c8d81312.js"><link rel="prefetch" href="/assets/js/75.dd1ae94f.js"><link rel="prefetch" href="/assets/js/76.b06cc20c.js"><link rel="prefetch" href="/assets/js/77.855f7650.js"><link rel="prefetch" href="/assets/js/78.4e5b0253.js"><link rel="prefetch" href="/assets/js/79.95567ab3.js"><link rel="prefetch" href="/assets/js/8.62836d81.js"><link rel="prefetch" href="/assets/js/80.7b7033a0.js"><link rel="prefetch" href="/assets/js/81.45b93100.js"><link rel="prefetch" href="/assets/js/82.36d8eb8a.js"><link rel="prefetch" href="/assets/js/83.b361b85d.js"><link rel="prefetch" href="/assets/js/84.2e4874fa.js"><link rel="prefetch" href="/assets/js/85.272cfc57.js"><link rel="prefetch" href="/assets/js/86.aaa56439.js"><link rel="prefetch" href="/assets/js/87.dc9e3259.js"><link rel="prefetch" href="/assets/js/88.689b6a8b.js"><link rel="prefetch" href="/assets/js/89.f22e017d.js"><link rel="prefetch" href="/assets/js/9.584f1ef6.js"><link rel="prefetch" href="/assets/js/90.d0ed3f12.js"><link rel="prefetch" href="/assets/js/91.21868b2f.js"><link rel="prefetch" href="/assets/js/92.0b1bc56b.js"><link rel="prefetch" href="/assets/js/93.9fd7ccef.js"><link rel="prefetch" href="/assets/js/94.5cee5367.js"><link rel="prefetch" href="/assets/js/95.c81773d8.js"><link rel="prefetch" href="/assets/js/96.c8f61d95.js"><link rel="prefetch" href="/assets/js/97.f86ea530.js"><link rel="prefetch" href="/assets/js/98.09c0fa30.js"><link rel="prefetch" href="/assets/js/99.c4bd6444.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff3929f5.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.svg" alt="LiYang's blog" class="logo"> <span class="site-name can-hide">LiYang's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/pages/0a6679/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a6679/" class="nav-link">编程基础</a></li><li class="dropdown-item"><!----> <a href="/pages/714859/" class="nav-link">开发软件</a></li><li class="dropdown-item"><!----> <a href="/pages/690ae0/" class="nav-link">类库框架</a></li><li class="dropdown-item"><!----> <a href="/pages/d2dd63/" class="nav-link">知识进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/fd695e/" class="nav-link">工程开发</a></li><li class="dropdown-item"><!----> <a href="/pages/f37132/" class="nav-link">编程思想</a></li><li class="dropdown-item"><!----> <a href="/pages/73d90e/" class="nav-link">领域分支</a></li><li class="dropdown-item"><!----> <a href="/pages/b7eb61/" class="nav-link">社区发展</a></li><li class="dropdown-item"><!----> <a href="/pages/83b440/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0d54d7/" class="nav-link">后端知识</a></li><li class="dropdown-item"><!----> <a href="/pages/416bc0/" class="nav-link">软技能</a></li></ul></div></div><div class="nav-item"><a href="/leetCode/" class="nav-link">🤡LeetCode</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记本" class="dropdown-title"><a href="/notes/" class="link-title">笔记本</a> <span class="title" style="display:none;">笔记本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>书籍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/es6/" class="nav-link">《ES6教程》</a></li><li class="dropdown-subitem"><a href="/books/professionalJs/" class="nav-link">《JavaScript高级程序设计》</a></li></ul></li><li class="dropdown-item"><h4>教程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/course/css3-jspang/" class="nav-link">CSS3(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/es6-jspang/" class="nav-link">ES6(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/performance/" class="nav-link">性能(Google Developers)</a></li></ul></li><li class="dropdown-item"><h4>技术文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ec3b6e/.html" class="nav-link">leaflet中文教程</a></li></ul></li></ul></div></div> <a href="https://github.com/fineliving" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Evan Xu</h3> <span>前端界的小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/pages/0a6679/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a6679/" class="nav-link">编程基础</a></li><li class="dropdown-item"><!----> <a href="/pages/714859/" class="nav-link">开发软件</a></li><li class="dropdown-item"><!----> <a href="/pages/690ae0/" class="nav-link">类库框架</a></li><li class="dropdown-item"><!----> <a href="/pages/d2dd63/" class="nav-link">知识进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/fd695e/" class="nav-link">工程开发</a></li><li class="dropdown-item"><!----> <a href="/pages/f37132/" class="nav-link">编程思想</a></li><li class="dropdown-item"><!----> <a href="/pages/73d90e/" class="nav-link">领域分支</a></li><li class="dropdown-item"><!----> <a href="/pages/b7eb61/" class="nav-link">社区发展</a></li><li class="dropdown-item"><!----> <a href="/pages/83b440/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0d54d7/" class="nav-link">后端知识</a></li><li class="dropdown-item"><!----> <a href="/pages/416bc0/" class="nav-link">软技能</a></li></ul></div></div><div class="nav-item"><a href="/leetCode/" class="nav-link">🤡LeetCode</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记本" class="dropdown-title"><a href="/notes/" class="link-title">笔记本</a> <span class="title" style="display:none;">笔记本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>书籍</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/es6/" class="nav-link">《ES6教程》</a></li><li class="dropdown-subitem"><a href="/books/professionalJs/" class="nav-link">《JavaScript高级程序设计》</a></li></ul></li><li class="dropdown-item"><h4>教程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/course/css3-jspang/" class="nav-link">CSS3(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/es6-jspang/" class="nav-link">ES6(技术胖)</a></li><li class="dropdown-subitem"><a href="/course/performance/" class="nav-link">性能(Google Developers)</a></li></ul></li><li class="dropdown-item"><h4>技术文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ec3b6e/.html" class="nav-link">leaflet中文教程</a></li></ul></li></ul></div></div> <a href="https://github.com/fineliving" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/932a6d/" class="sidebar-link">性能为何至关重要</a></li><li><a href="/pages/5c6fa0/" class="sidebar-link">使用 RAIL 模型评估性能</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>加载性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/3da005/" class="sidebar-link">总览</a></li><li><a href="/pages/5af7d4/" class="sidebar-link">如何测量速度？</a></li><li><a href="/pages/7c5d18/" class="sidebar-link">文字内容</a></li><li><a href="/pages/79cdb9/" class="sidebar-link">图形内容</a></li><li><a href="/pages/f4a116/" class="sidebar-link">HTTP请求</a></li><li><a href="/pages/998cd7/" class="sidebar-link">HTTP缓存</a></li><li><a href="/pages/cb3ca9/" class="sidebar-link">总结和演示</a></li><li><a href="/pages/ed916f/" class="sidebar-link">速度工具</a></li><li><a href="/pages/200943/" class="sidebar-link">通过导航和资源定时评估加载性能</a></li><li><a href="/pages/13c2e2/" class="sidebar-link">以用户为中心的性能指标</a></li><li><a href="/pages/30d447/" class="sidebar-link">了解低带宽和高延迟</a></li><li><a href="/pages/029c6a/" class="sidebar-link">优化内容效率</a></li><li><a href="/pages/1c8f87/" class="sidebar-link">避免不必要的下载</a></li><li><a href="/pages/9c6617/" class="sidebar-link">优化基于文本的资产的编码和传送大小</a></li><li><a href="/pages/000317/" class="sidebar-link">JavaScript启动优化</a></li><li><a href="/pages/d9771b/" class="sidebar-link">加载第三方JavaScript</a></li><li><a href="/pages/16e316/" class="sidebar-link">网页字体优化</a></li><li><a href="/pages/0497ba/" class="sidebar-link">通过客户提示适应用户</a></li><li><a href="/pages/d34d56/" class="sidebar-link">通过保存数据交付快速轻便的应用程序</a></li><li><a href="/pages/b5f9f1/" class="sidebar-link">通过摇树来减少JavaScript负载</a></li><li><a href="/pages/a0ed26/" class="sidebar-link">离线指南</a></li><li><a href="/pages/690a1a/" class="sidebar-link">网页存储概览</a></li><li><a href="/pages/b84219/" class="sidebar-link">使用IndexedDB的最佳实践</a></li><li><a href="/pages/65f486/" class="sidebar-link">Offline UX 注意事项</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>精心安排加载</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/371041/" class="sidebar-link">关键渲染路径</a></li><li><a href="/pages/f31118/" class="sidebar-link">构建对象模型</a></li><li><a href="/pages/739b11/" class="sidebar-link">渲染树构建、布局及绘制</a></li><li><a href="/pages/b9d842/" class="sidebar-link">阻塞渲染的CSS</a></li><li><a href="/pages/f005c3/" class="sidebar-link">使用JavaScript添加交互</a></li><li><a href="/pages/1d7873/" class="sidebar-link">评估关键渲染路径</a></li><li><a href="/pages/3b99f9/" class="sidebar-link">分析关键渲染路径性能</a></li><li><a href="/pages/0c6644/" class="sidebar-link">优化关键渲染路径</a></li><li><a href="/pages/baf7eb/" class="sidebar-link">PageSpeed规则和建议</a></li><li><a href="/pages/4f4df7/" class="sidebar-link">HTTP/2简介</a></li><li><a href="/pages/65a803/" class="sidebar-link">使用PRPL模式应用即时加载</a></li><li><a href="/pages/08c756/" class="sidebar-link">资源优先级–让浏览器助您一臂之力</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>利用webpack优化web性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c18ffb/" class="sidebar-link">介绍</a></li><li><a href="/pages/ec3b6e/" aria-current="page" class="active sidebar-link">减小前端大小</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/ec3b6e/#使用生产模式-仅适用于-webpack-4" class="sidebar-link">使用生产模式（仅适用于 webpack 4）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/ec3b6e/#进一步阅读" class="sidebar-link">进一步阅读</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/ec3b6e/#启用缩小" class="sidebar-link">启用缩小</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/ec3b6e/#捆绑级别的缩小" class="sidebar-link">捆绑级别的缩小</a></li></ul></li></ul></li><li><a href="/pages/8bf683/" class="sidebar-link">利用长期缓存</a></li><li><a href="/pages/0e8875/" class="sidebar-link">monitor-and-analyze</a></li><li><a href="/pages/7cfdc0/" class="sidebar-link">结论</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>渲染性能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7f377b/" class="sidebar-link">渲染性能</a></li><li><a href="/pages/ccf0ef/" class="sidebar-link">优化JavaScript执行</a></li><li><a href="/pages/bdf4e6/" class="sidebar-link">缩小样式计算的范围并降低其复杂性</a></li><li><a href="/pages/270241/" class="sidebar-link">简化绘制的复杂度、减小绘制区域</a></li><li><a href="/pages/ad1d46/" class="sidebar-link">坚持仅合成器的属性和管理层计数</a></li><li><a href="/pages/de7324/" class="sidebar-link">使输入处理程序去除抖动</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>审核网站</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/29e252/" class="sidebar-link">审核</a></li><li><a href="/pages/ec49df/" class="sidebar-link">准备工作</a></li><li><a href="/pages/c4f089/" class="sidebar-link">检查网站安全</a></li><li><a href="/pages/b7e0b0/" class="sidebar-link">测量性能工具</a></li><li><a href="/pages/bac92b/" class="sidebar-link">分享结果</a></li><li><a href="/pages/e05301/" class="sidebar-link">下一步</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/course/performance" title="《性能(Google Developers)》-目录页" data-v-1cd794fe>《性能(Google Developers)》</a></li> <li data-v-1cd794fe><a href="/course/performance/#利用webpack优化web性能" title="《性能(Google Developers)》#利用webpack优化web性能" data-v-1cd794fe>利用webpack优化web性能</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/fineliving" target="_blank" title="作者" class="beLink" data-v-1cd794fe>Li Yang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2020-11-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          减小前端大小
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="减小前端大小"><a href="#减小前端大小" class="header-anchor">#</a> 减小前端大小</h1> <p>优化应用程序时，要做的第一件事就是使其尽可能小。这是使用 webpack 的方法。</p> <h2 id="使用生产模式-仅适用于-webpack-4"><a href="#使用生产模式-仅适用于-webpack-4" class="header-anchor">#</a> 使用生产模式（仅适用于 webpack 4）</h2> <p>Webpack 4 引入<a href="https://webpack.js.org/concepts/mode/" target="_blank" rel="noopener noreferrer">了新<code>mode</code>标志<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。您可以将此标志设置为<code>'development'</code>或<code>'production'</code>暗示 webpack 您正在针对特定环境构建应用程序：</p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.config.js
module.exports = {
  mode: 'production',
};
</code></pre></div><p><code>production</code>在构建用于生产的应用程序时，请确保启用该模式。这将使 webpack 应用优化，如最小化，删除库中仅开发代码<a href="https://medium.com/webpack/webpack-4-mode-and-optimization-5423a6bc597a" target="_blank" rel="noopener noreferrer">等<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="进一步阅读"><a href="#进一步阅读" class="header-anchor">#</a> 进一步阅读</h3> <ul><li><a href="https://medium.com/webpack/webpack-4-mode-and-optimization-5423a6bc597a" target="_blank" rel="noopener noreferrer"><code>mode</code>标志配置的具体内容<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="启用缩小"><a href="#启用缩小" class="header-anchor">#</a> 启用缩小</h2> <p>**注意：**大多数仅适用于 webpack 3。如果您<a href="https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size#enable-the-production-mode" target="_blank" rel="noopener noreferrer">在生产模式下<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>使用 <a href="https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size#enable-the-production-mode" target="_blank" rel="noopener noreferrer">webpack 4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，则捆绑级别的缩小已启用-您仅需启用<a href="https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size#loader-specific-options" target="_blank" rel="noopener noreferrer">特定<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>于 <a href="https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size#loader-specific-options" target="_blank" rel="noopener noreferrer">加载程序的选项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>缩小是指通过删除多余的空格，缩短变量名等方式压缩代码。像这样：</p> <div class="language- extra-class"><pre class="language-text"><code>// Original code
function map(array, iteratee) {
  let index = -1;
  const length = array == null ? 0 : array.length;
  const result = new Array(length);

  while (++index &lt; length) {
    result[index] = iteratee(array[index], index, array);
  }
  return result;
}
</code></pre></div><p>↓</p> <div class="language- extra-class"><pre class="language-text"><code>// Minified code
function map(n,r){let t=-1;for(const a=null==n?0:n.length,l=Array(a);++t&lt;a;)l[t]=r(n[t],t,n);return l}
</code></pre></div><p>Webpack 支持两种减少代码的方式：<em>捆绑包级别的减少</em>和 <em>特定于加载程序的 options</em>。它们应同时使用。</p> <h3 id="捆绑级别的缩小"><a href="#捆绑级别的缩小" class="header-anchor">#</a> 捆绑级别的缩小</h3> <p>捆绑包级别的压缩会在编译后压缩整个捆绑包。运作方式如下：</p> <ol><li><p>您编写如下代码：</p> <div class="language- extra-class"><pre class="language-text"><code>// comments.js import './comments.css' ; 导出功能渲染（数据，目标）{   控制台。日志（'Rendered！' ）; }
</code></pre></div></li></ol> <div class="language- extra-class"><pre class="language-text"><code>
2. Webpack 将其编译为以下内容：

</code></pre></div><p>// bundle.js（部分）“使用严格”；Object 。defineProperty （** webpack_exports** ，“ **esModule ”，{ value ：true }）；/ <em>和声导出（不可变）</em> / <strong>webpack_exports ** [“ render ”] =渲染；/ <em>和谐引入</em> / var <strong>WEBPACK_IMPORTED_MODULE_0</strong>comments_css</strong> = <strong>webpack_require ** （1 ）；/ <em>和谐导入</em> / var <strong>WEBPACK_IMPORTED_MODULE_0</strong>comments_css_js</strong>_default = **webpack_require __ 。n</p> <p>（** WEBPACK_IMPORTED_MODULE_0**comments_css__ ）； 函数渲染（数据，目标）{ 控制台。日志（“已渲染！” ）；}</p> <div class="language- extra-class"><pre class="language-text"><code>
3. 压缩器将其压缩为以下内容：

</code></pre></div><p>//缩小了 bundle.js（的一部分）“ use strict” ；功能 t （e ，n ）{ 控制台。log （“ Rendered！” ）} 对象。defineProperty （n ，“ __esModule” ，{ value ：！0 }），n 。渲染= t ; var o = r （1 ）; [R 。n （o ）</p> <div class="language- extra-class"><pre class="language-text"><code>
**在 webpack 4 中，**在生产模式下和不使用生产模式下，都自动启用了捆绑包级别的缩小。它[在后台](https://github.com/mishoo/UglifyJS2)使用[UglifyJS 缩小程序](https://github.com/mishoo/UglifyJS2) 。（如果您需要禁用缩小功能，只需使用开发模式或将其传递`false`给该`optimization.minimize`选项即可。）

**在 webpack 3 中，**您需要 直接使用[UglifyJS 插件](https://github.com/webpack-contrib/uglifyjs-webpack-plugin)。该插件与 webpack 捆绑在一起；要启用它，请将其添加到`plugins` 配置部分：

</code></pre></div><p>// webpack.config.js
const webpack = require('webpack');</p> <p>module.exports = {
plugins: [
new webpack.optimize.UglifyJsPlugin(),
],
};</p> <div class="language- extra-class"><pre class="language-text"><code>
**注意：**在 webpack 3 中，UglifyJS 插件无法编译 ES2015 +（ES6 +）代码。这意味着，如果您的代码使用类，箭头函数或其他新语言功能，而您没有将它们编译到 ES5 中，则插件将引发错误。

如果需要编译新语法，请使用 [uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin)软件包。这是与 webpack 捆绑在一起的插件，但是更新，并且可以编译 ES2015 +代码。

### 加载程序特定的选项

减少代码的第二种方法是特定于加载程序的选项（[什么是加载程序](https://webpack.js.org/concepts/loaders/)）。使用加载程序选项，您可以压缩压缩器无法压缩的内容。例如，当您使用导入 CSS 文件时 [`css-loader`](https://github.com/webpack-contrib/css-loader)，该文件将被编译为字符串：

</code></pre></div><p>/_ comments.css _/
.comment {
color: black;
}</p> <div class="language- extra-class"><pre class="language-text"><code>
↓

</code></pre></div><p>//缩小的 bundle.js（部分）
exports = module 。出口= <strong>webpack_require</strong> （1 ）（），
出口。推（[ 模块。我，“的.comment {\ r \ n 颜色：黑色; \ r \ N}” ， “” ]）;</p> <div class="language- extra-class"><pre class="language-text"><code>
压缩程序无法压缩此代码，因为它是一个字符串。为了减少文件内容，我们需要配置加载器来做到这一点：

</code></pre></div><p>// webpack.config.js 模块。出口= { 模块：{ 规则：[ { 测试：/ .css$/ ，使用：[ 'style-loader' ，{ 加载器：'css-loader' ，选项：{ 最小化：真} }，]，}，]，}，};</p> <div class="language- extra-class"><pre class="language-text"><code>
### 进一步阅读

- [UglifyJsPlugin 文档](https://github.com/webpack-contrib/uglifyjs-webpack-plugin)
- 其他受欢迎的缩小器：[Babel Minify](https://github.com/webpack-contrib/babel-minify-webpack-plugin)，[Google Closure 编译器](https://github.com/roman01la/webpack-closure-compiler)

## 指定 `NODE_ENV=production`

**注意：**这仅是 webpack 3。如果您[在生产模式下](https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size#enable-the-production-mode)使用 [webpack 4](https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size#enable-the-production-mode)，则`NODE_ENV=production` 优化已启用-随时跳过本节。

减小前端大小的另一种方法是将 代码中的`NODE_ENV` [环境变量](https://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them)设置为 value `production`。

图书馆读取`NODE_ENV`变量以检测在开发或生产中应该以哪种模式工作。一些库基于此变量的行为会有所不同。例如，当`NODE_ENV`未设置`production`为时，Vue.js 会进行其他检查并显示警告：

</code></pre></div><p>// vue/dist/vue.runtime.esm.js
// …
if (process.env.NODE_ENV !== 'production') {
warn('props must be strings when using array syntax.');
}
// …</p> <div class="language- extra-class"><pre class="language-text"><code>
React 的工作原理类似–它加载了包含警告的开发版本：

</code></pre></div><p>// react/index.js
if (process.env.NODE_ENV === 'production') {
module.exports = require('./cjs/react.production.min.js');
} else {
module.exports = require('./cjs/react.development.js');
}</p> <p>// react/cjs/react.development.js
// …
warning$3(
componentClass.getDefaultProps.isReactClassApproved,
'getDefaultProps is only used on classic React.createClass ' +
'definitions. Use a static property named <code>defaultProps</code> instead.'
);
// …</p> <div class="language- extra-class"><pre class="language-text"><code>
这种检查和警告通常在生产中是不必要的，但是它们保留在代码中并增加了库的大小。**在 webpack 4 中，**通过添加以下`optimization.nodeEnv: 'production'`选项将其删除：

</code></pre></div><p>// webpack.config.js (for webpack 4)
module.exports = {
optimization: {
nodeEnv: 'production',
minimize: true,
},
};</p> <div class="language- extra-class"><pre class="language-text"><code>
**在 webpack 3 中，**使用[`DefinePlugin`](https://webpack.js.org/plugins/define-plugin/)代替：

</code></pre></div><p>// webpack.config.js (for webpack 3)
const webpack = require('webpack');</p> <p>module.exports = {
plugins: [
new webpack.DefinePlugin({
'process.env.NODE_ENV': '&quot;production&quot;',
}),
new webpack.optimize.UglifyJsPlugin(),
],
};</p> <div class="language- extra-class"><pre class="language-text"><code>
这两个`optimization.nodeEnv`选项和`DefinePlugin`工作方式相同-它们取代所有出现的`process.env.NODE_ENV`与指定的值。通过上面的配置：

1. 的 WebPack 将取代所有出现的

</code></pre></div><p>process.env.NODE_ENV</p> <div class="language- extra-class"><pre class="language-text"><code>
有

</code></pre></div><p>&quot;production&quot;</p> <div class="language- extra-class"><pre class="language-text"><code>
：

</code></pre></div><div class="language- extra-class"><pre><code>// vue / dist / vue.runtime.esm.js if （typeof val === 'string' ）{   name = camelize （val ）;   res [ name ] = { type ：null }; } 否则如果（过程。ENV 。NODE_ENV ==！'生产'）{   警告（'使用数组语法道具时必须是字符串。' ）; }
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>
↓

</code></pre></div><p>// vue / dist / vue.runtime.esm.js if （typeof val === 'string' ）{ name = camelize （val ）; res [ name ] = { type ：null }; } else if （“ production” ！== 'production' ）{ 警告（“使用数组语法时，props 必须是字符串。” ）；}</p> <div class="language- extra-class"><pre class="language-text"><code>
2. 然后

，minifier

将删除所有此类

</code></pre></div><p>if</p> <div class="language- extra-class"><pre class="language-text"><code>
分支–因为

</code></pre></div><p>&quot;production&quot; !== 'production'</p> <div class="language- extra-class"><pre class="language-text"><code>
始终为 false，并且插件了解这些分支内的代码将永远不会执行：

</code></pre></div><p>// vue / dist / vue.runtime.esm.js if （typeof val === 'string' ）{ name = camelize （val ）; res [ name ] = { type ：null }; } else if （“ production” ！== 'production' ）{ 警告（“使用数组语法时，props 必须是字符串。” ）；}</p> <div class="language- extra-class"><pre class="language-text"><code>
↓

</code></pre></div><p>// vue / dist / vue.runtime.esm.js（不缩小）if （typeof val === 'string' ）{ name = camelize （val ）; res [ name ] = { type ：null }; }</p> <div class="language- extra-class"><pre class="language-text"><code>
### 进一步阅读

- [什么是“环境变量”](https://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them)
- 的 WebPack 文档有关：[`DefinePlugin`](https://webpack.js.org/plugins/define-plugin/)， [`EnvironmentPlugin`](https://webpack.js.org/plugins/environment-plugin/)

## 使用 ES 模块

减小前端大小的另一种方法是使用[ES 模块](https://ponyfoo.com/articles/es6-modules-in-depth)。

使用 ES 模块时，webpack 可以进行树状摇动。摇树是指捆绑器遍历整个依赖关系树，检查使用了哪些依赖关系，并删除未使用的依赖关系。因此，如果您使用 ES 模块语法，则 webpack 可以消除未使用的代码：

1. 您编写的文件具有多个导出，但是该应用仅使用其中一个：

</code></pre></div><p>// comment.js export const render = （）=&gt; { 返回“已渲染！” ; }; 导出 const commentRestEndpoint = '/ rest / comments' ; // index.js 进口{ 呈现} 从” ./comments.js' ; 渲染（）;</p> <div class="language- extra-class"><pre class="language-text"><code>
2. Webpack 知道

</code></pre></div><p>commentRestEndpoint</p> <div class="language- extra-class"><pre class="language-text"><code>
不使用它，并且不会在捆绑包中生成单独的导出点：

</code></pre></div><p>// bundle.js（部分对应于 comments.js） （功能（模块，<strong>webpack_exports</strong> ，<strong>webpack_require</strong> ）{ “使用严格” ; const 的渲染= （）=&gt; { 返回'渲染！' ; }; / <em>和谐出口（不可变）</em> / <strong>webpack_exports</strong> [ “ a” ] = 渲染; const commentRestEndpoint = '/ rest / comments' ; / _未使用的和声导出 commentRestEndpoint _ / }）</p> <div class="language- extra-class"><pre class="language-text"><code>
3. 压缩器

删除未使用的变量：

</code></pre></div><p>// bundle.js（与 comment.js 对应的部分）
（function（n，e）{“使用严格”; var r = function（）{返回“ Rendered！”}; eb = r}）</p> <div class="language- extra-class"><pre class="language-text"><code>
即使它们是用 ES 模块编写的，这也适用于库。

**注意：**在 webpack 中，没有缩小器就无法摇树。Webpack 只是删除未使用的导出的导出语句；是删除器删除未使用的代码。因此，如果您在没有压缩程序的情况下编译捆绑软件，捆绑软件将不会变得更小。

不过，您不需要完全使用 webpack 的内置 minifier（`UglifyJsPlugin`）。任何支持清除死代码的压缩程序（例如[Babel Minify 插件](https://github.com/webpack-contrib/babel-minify-webpack-plugin) 或[Google Closure Compiler 插件](https://github.com/roman01la/webpack-closure-compiler)）都可以解决问题。

**警告：**不要将 ES 模块意外编译成 CommonJS 模块。

如果将 Babel 与`babel-preset-env`或结合使用`babel-preset-es2015`，请检查这些预设的设置。默认情况下，他们 transpile ES“ `import`并`export`以 CommonJS 的” `require`和 `module.exports`。[传递`{ modules: false }` 选项](https://github.com/babel/babel/tree/master/packages/babel-preset-env)以禁用此功能。

以打字稿一样：记得设置`{ &quot;compilerOptions&quot;: { &quot;module&quot;: &quot;es2015&quot; } }` 你的`tsconfig.json`。

### 进一步阅读

- [“ ES6 深度模块”](https://ponyfoo.com/articles/es6-modules-in-depth)
- Webpack [关于摇树的](https://webpack.js.org/guides/tree-shaking/)文档

## 优化图像

图片占页面大小[的一半以上](http://httparchive.org/interesting.php?a=All&amp;l=Oct 16 2017)。尽管它们不像 JavaScript 那样重要（例如，它们不阻止渲染），但它们仍然占用了很大一部分带宽。使用`url-loader`，`svg-url-loader`并`image-webpack-loader`给他们优化的 WebPack。

[`url-loader`](https://github.com/webpack-contrib/url-loader)将小型静态文件内联到应用程序中。如果不进行配置，它将获取一个传递的文件，将其放在已编译的包旁边，然后返回该文件的 url。但是，如果指定该`limit`选项，它将把小于此限制的文件编码为[Base64 数据 URL，](https://css-tricks.com/data-uris/)并返回此 URL。这会将图像内联到 JavaScript 代码中并保存 HTTP 请求：

</code></pre></div><p>// webpack.config.js 模块。出口= { 模块：{ 规则：[ { 测试：/ .(jpe?g|png|gif)$/ ， 加载器：'url-loader' ， 选项：{ //内联文件小于 10 kB（10240 字节） 限制：10 * 1024 ，}，}，]，} };</p> <p>// index.js 从'./image.png' 导入 imageUrl ; //→ 如果 image.png 小于 10 kB，则<code>imageUrl</code>将包含//编码后的图像：'data：image / png; base64，iVBORw0KGg…' // //如果 image.png 大于 10 kB，则加载程序将创建一个新文件，//和<code>imageUrl</code>将包含其网址：<code>/ 2fcd56a1920be.png</code></p> <div class="language- extra-class"><pre class="language-text"><code>
**注意：内**联图像减少了单独请求的数量，这很好（[即使使用 HTTP / 2](https://blog.octo.com/en/http2-arrives-but-sprite-sets-aint-no-dead/)），但是会增加捆绑软件的下载/解析时间和内存消耗。确保不要嵌入大图或大图–否则捆绑时间的增加将超过内联的好处。

[`svg-url-loader`](https://github.com/bhovhannes/svg-url-loader)的工作原理与`url-loader`– 一样，只是它使用[URL 编码](https://developer.mozilla.org/en-US/docs/Glossary/percent-encoding)而不是 Base64 编码文件。这对于 SVG 图像很有用-因为 SVG 文件只是纯文本，所以这种编码更有效：

</code></pre></div><p>// webpack.config.js
module.exports = {
module: {
rules: [
{
test: /.svg$/,
loader: 'svg-url-loader',
options: {
// Inline files smaller than 10 kB (10240 bytes)
limit: 10 * 1024,
// Remove the quotes from the url
// (they’re unnecessary in most cases)
noquotes: true,
},
},
],
},
};</p> <div class="language- extra-class"><pre class="language-text"><code>
**注意：**svg-url-loader 具有改善 Internet Explorer 支持的选项，但会恶化其他浏览器的内联。如果需要支持此浏览器，请[应用`iesafe: true` 选项](https://github.com/bhovhannes/svg-url-loader#iesafe)。

[`image-webpack-loader`](https://github.com/tcoopman/image-webpack-loader)压缩通过它的图像。它支持 JPG，PNG，GIF 和 SVG 图像，因此我们将在所有这些类型中使用它。

该加载程序不会将图像嵌入到应用程序中，因此它必须与`url-loader`和 配对使用`svg-url-loader`。为避免将其复制粘贴到两个规则中（一个用于 JPG / PNG / GIF 图像，另一个用于 SVG 图像），我们将将此加载器作为单独的规则包括在内[`enforce: 'pre'`](https://webpack.js.org/configuration/module/#rule-enforce)：

</code></pre></div><p>// webpack.config.js
module.exports = {
module: {
rules: [
{
test: /.(jpe?g|png|gif|svg)$/,
loader: 'image-webpack-loader',
// This will apply the loader before the other ones
enforce: 'pre',
},
],
},
};</p> <div class="language- extra-class"><pre class="language-text"><code>
加载程序的默认设置已经可以使用了-但是如果您想进一步配置它，请参阅[插件选项](https://github.com/tcoopman/image-webpack-loader#options)。要选择要指定的选项，请查看 Addy Osmani 出色的[图像优化指南](https://images.guide/)。

### 进一步阅读

- [“ base64 编码用于什么？”](https://stackoverflow.com/questions/201479/what-is-base-64-encoding-used-for)
- Addy Osmani 的[图像优化指南](https://images.guide/)

## 优化依赖关系

JavaScript 平均大小的一半以上来自于依赖关系，而该大小的一部分可能就不必要了。

例如，Lodash（从 v4.17.4 版本开始）向捆绑包添加了 72 KB 的缩小代码。但是，如果仅使用 20 种方法，那么大约 65 KB 的缩小代码将无济于事。

另一个示例是 Moment.js。其 2.19.1 版本需要 223 KB 的精简代码，这是巨大的– [2017 年 10 月，](http://httparchive.org/interesting.php?a=All&amp;l=Oct 16 2017)页面上 JavaScript 的平均大小[为 452 KB](http://httparchive.org/interesting.php?a=All&amp;l=Oct 16 2017)。但是，该大小的 170 KB 是[本地化文件](https://github.com/moment/moment/tree/4caa268356434f3ae9b5041985d62a0e8c246c78/locale)。如果您不使用多种语言的 Moment.js，这些文件将毫无目的地膨胀。

所有这些依赖关系都可以轻松优化。我们已经在 GitHub 存储库中收集了优化方法- 快来[查看](https://github.com/GoogleChromeLabs/webpack-libs-optimizations)！

## 为 ES 模块启用模块串联（又名示波器吊装）

**注意：**如果您在[生产模式下](https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size#enable-the-production-mode)使用[webpack 4，则](https://developers.google.cn/web/fundamentals/performance/webpack/decrease-frontend-size#enable-the-production-mode)模块连接已启用。随时跳过此部分。

构建包时，webpack 会将每个模块包装为一个函数：

</code></pre></div><p>// index.js
import {render} from './comments.js';
render();</p> <p>// comments.js
export function render(data, target) {
console.log('Rendered!');
}</p> <div class="language- extra-class"><pre class="language-text"><code>
↓

</code></pre></div><p>// bundle.js (part of)
/_ 0 _/
(function(module, <strong>webpack_exports</strong>, <strong>webpack_require</strong>) {</p> <p>&quot;use strict&quot;;
Object.defineProperty(<strong>webpack_exports</strong>, &quot;<strong>esModule&quot;, { value: true });
var <strong>WEBPACK_IMPORTED_MODULE_0</strong>comments_js</strong> = <strong>webpack_require</strong>(1);
Object(<strong>WEBPACK_IMPORTED_MODULE_0</strong>comments_js__[&quot;a&quot; /* render */])();</p> <p>}),
/_ 1 _/
(function(module, <strong>webpack_exports</strong>, <strong>webpack_require</strong>) {</p> <p>&quot;use strict&quot;;
<strong>webpack_exports</strong>[&quot;a&quot;] = render;
function render(data, target) {
console.log('Rendered!');
}</p> <p>})</p> <div class="language- extra-class"><pre class="language-text"><code>
过去，将 CommonJS / AMD 模块彼此隔离是必需的。但是，这增加了每个模块的大小和性能开销。

Webpack 2 引入了对 ES 模块的支持，与 CommonJS 和 AMD 模块不同，该 ES 模块可以捆绑在一起而无需将每个函数包装在一起。webpack 3 通过[模块串联](https://webpack.js.org/plugins/module-concatenation-plugin/)使这种捆绑成为可能 。以下是模块串联的作用：

</code></pre></div><p>// index.js
import {render} from './comments.js';
render();</p> <p>// comments.js
export function render(data, target) {
console.log('Rendered!');
}</p> <div class="language- extra-class"><pre class="language-text"><code>
↓

</code></pre></div><p>// Unlike the previous snippet, this bundle has only one module
// which includes the code from both files</p> <p>// bundle.js (part of; compiled with ModuleConcatenationPlugin)
/_ 0 _/
(function(module, <strong>webpack_exports</strong>, <strong>webpack_require</strong>) {</p> <p>&quot;use strict&quot;;
Object.defineProperty(<strong>webpack_exports</strong>, &quot;__esModule&quot;, { value: true });</p> <p>// CONCATENATED MODULE: ./comments.js
function render(data, target) {
console.log('Rendered!');
}</p> <p>// CONCATENATED MODULE: ./index.js
render();</p> <p>})</p> <div class="language- extra-class"><pre class="language-text"><code>
看到不同？在普通捆绑中，模块 0 是`render`模块 1 所需要的。通过模块串联，`require`只需将其替换为所需的功能，然后删除模块 1。该捆绑软件具有更少的模块，并且模块开销也更少！

要打开此行为，请**在 webpack 4**中启用以下`optimization.concatenateModules`选项：

</code></pre></div><p>// webpack.config.js (for webpack 4)
module.exports = {
optimization: {
concatenateModules: true,
},
};</p> <div class="language- extra-class"><pre class="language-text"><code>
**在 webpack 3 中，**使用`ModuleConcatenationPlugin`：

</code></pre></div><p>// webpack.config.js (for webpack 3)
const webpack = require('webpack');</p> <p>module.exports = {
plugins: [
new webpack.optimize.ModuleConcatenationPlugin(),
],
};</p> <div class="language- extra-class"><pre class="language-text"><code>
**注意：不**知道为什么默认情况下不启用此行为？串联模块很酷，[但是增加了构建时间，并且中断了热模块的更换](https://twitter.com/TheLarkInn/status/925800563144454144)。这就是为什么只能在生产中启用它的原因。

### 进一步阅读

- [用于](https://webpack.js.org/plugins/module-concatenation-plugin/) ModuleConcatenationPlugin 的 Webpack 文档
- [“示波器吊装简介”](https://medium.com/webpack/brief-introduction-to-scope-hoisting-in-webpack-8435084c171f)
- [此插件功能的](https://medium.com/webpack/webpack-freelancing-log-book-week-5-7-4764be3266f5)详细说明

## 使用`externals`，如果你同时拥有的 WebPack 和非的 WebPack 码

您可能有一个大型项目，其中某些代码是使用 webpack 编译的，而有些则不是。就像视频托管网站一样，播放器小部件可能是使用 webpack 构建的，而周围的页面可能不是：

![视频托管网站的屏幕截图](https://developers.google.cn/web/fundamentals/performance/webpack/video-hosting.png)（完全随机的视频托管网站）

如果这两段代码都具有共同的依赖性，则可以共享它们，以避免多次下载它们的代码。这是通过[webpack 的`externals` 选项](https://webpack.js.org/configuration/externals/)完成[的](https://webpack.js.org/configuration/externals/) -用变量或其他外部导入替换模块。

### 如果依赖项在 `window`

如果您的非 webpack 代码依赖于，可以将其作为变量中的依赖项，则将`window`别名依赖项名称别名为变量名：

</code></pre></div><p>// webpack.config.js
module.exports = {
externals: {
'react': 'React',
'react-dom': 'ReactDOM',
},
};</p> <div class="language- extra-class"><pre class="language-text"><code>
使用此配置，webpack 将不会捆绑`react`和`react-dom`打包。相反，它们将被替换为以下内容：

</code></pre></div><p>// bundle.js (part of)
(function(module, exports) {
// A module that exports <code>window.React</code>. Without <code>externals</code>,
// this module would include the whole React bundle
module.exports = React;
}),
(function(module, exports) {
// A module that exports <code>window.ReactDOM</code>. Without <code>externals</code>,
// this module would include the whole ReactDOM bundle
module.exports = ReactDOM;
})</p> <div class="language- extra-class"><pre class="language-text"><code>
### 如果依赖项作为 AMD 软件包加载

如果您的非 Webpack 代码没有将依赖项公开给`window`，则情况会更加复杂。但是，如果非 webpack 代码将这些依赖项作为[AMD 软件包使用](http://requirejs.org/docs/whyamd.html#amd)，则仍然可以避免两次加载相同的代码。

为此，请将 webpack 代码作为 AMD 捆绑包和别名模块编译为库 URL：

</code></pre></div><p>// webpack.config.js
module.exports = {
output: { libraryTarget: 'amd' },</p> <p>externals: {
'react': { amd: '/libraries/react.min.js' },
'react-dom': { amd: '/libraries/react-dom.min.js' },
},
};</p> <div class="language- extra-class"><pre class="language-text"><code>
Webpack 将把捆绑包包装起来`define()`并使其依赖于以下 URL：

</code></pre></div><p>// bundle.js (beginning)
define([&quot;/libraries/react.min.js&quot;, &quot;/libraries/react-dom.min.js&quot;], function () { … });</p> <div class="language- extra-class"><pre class="language-text"><code>
如果非 webpack 代码使用相同的 URL 来加载其依赖项，则这些文件将仅被加载一次-其他请求将使用加载器缓存。

**注意：**Webpack 仅替换与`externals`对象键完全匹配的那些导入。这意味着，如果您编写`import React from 'react/umd/react.production.min.js'`，则该库不会从捆绑软件中排除。这是合理的-的 WebPack 不知道，如果`import 'react'`和 `import 'react/umd/react.production.min.js'`是相同的东西-所以请小心。

### 进一步阅读

- 的 WebPack 文档[上`externals`](https://webpack.js.org/configuration/externals/)

## 加起来

- 如果使用 webpack 4，请启用生产模式
- 使用捆绑包级别的压缩器和加载器选项将代码最小化
- 通过替换`NODE_ENV`为删除仅开发代码`production`
- 使用 ES 模块启用摇树
- 压缩影像
- 应用特定于依赖项的优化
- 启用模块串联
- 使用`externals`，如果这是有道理的，你
</code></pre></div></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/c18ffb/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">介绍</div></a> <a href="/pages/8bf683/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">利用长期缓存</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/c18ffb/" class="prev">介绍</a></span> <span class="next"><a href="/pages/8bf683/">利用长期缓存</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/1c4e14/"><div>你想知道的css hack知识全都帮你整理好了</div></a> <span>06-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/d8a080/"><div>问题和经验</div></a> <span>06-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/a93118/"><div>CSS Hack</div></a> <span>06-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xugaoyi" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2021
    <span>Evan Xu | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.40794b05.js" defer></script><script src="/assets/js/2.21c2c3d2.js" defer></script><script src="/assets/js/244.cdbaaca6.js" defer></script>
  </body>
</html>